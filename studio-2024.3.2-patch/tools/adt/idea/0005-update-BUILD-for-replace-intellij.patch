From 9278db93627f28810bdaf82e02cd5decabceebd2 Mon Sep 17 00:00:00 2001
From: pngcui <pngcui1224@163.com>
Date: Tue, 30 Sep 2025 16:25:24 +0800
Subject: [PATCH 5/5] update BUILD for replace @@intellij:

Change-Id: Ie30619269ac99bcc95969a96800d96b14bdfec6c
---
 adt-testutils/BUILD                           |   8 +-
 adt-ui-model/BUILD                            |   2 +-
 adt-ui/BUILD                                  |   8 +-
 analytics/BUILD                               |   2 +-
 android-adb-ui/BUILD                          |  10 +-
 android-adb/BUILD                             |  10 +-
 android-common/BUILD                          |   8 +-
 android-kotlin/BUILD                          |  40 +-
 android-lang-databinding/BUILD                |   8 +-
 android-lang/BUILD                            |  12 +-
 android-lint/BUILD                            |  16 +-
 android-material/BUILD                        |   4 +-
 android-navigator/BUILD                       |   8 +-
 android-npw/BUILD                             |  10 +-
 android-plugin/BUILD                          |   2 +-
 android-templates/BUILD                       |  10 +-
 android-test-framework/BUILD                  |   8 +-
 android-transport/BUILD                       |   2 +-
 android-uitests/BUILD                         |   6 +-
 android/BUILD                                 |  48 +--
 android/actions/BUILD                         |   4 +-
 android/apk/BUILD                             |   2 +-
 android/completion/BUILD                      |   2 +-
 android/configurations/BUILD                  |   2 +-
 android/diagnostics/BUILD                     |   4 +-
 android/editing/BUILD                         |   2 +-
 android/editing/documentation/BUILD           |   4 +-
 android/editing/metrics/BUILD                 |   4 +-
 android/editors.fast/BUILD                    |   4 +-
 android/editors.manifest/BUILD                |   2 +-
 android/editors.strings/BUILD                 |   2 +-
 android/editors/BUILD                         |   6 +-
 android/gradle.project.sync/BUILD             |   2 +-
 android/gradle/BUILD                          |   6 +-
 android/gutter/BUILD                          |   4 +-
 android/imports/BUILD                         |   4 +-
 android/instantapp/BUILD                      |   2 +-
 android/integration/BUILD                     |   2 +-
 android/jetbrains/BUILD                       |   4 +-
 android/lang/BUILD                            |   4 +-
 android/model/BUILD                           |   2 +-
 android/modularize/BUILD                      |   4 +-
 android/navigator/BUILD                       |   2 +-
 android/project/BUILD                         |   2 +-
 android/rendering/BUILD                       |   4 +-
 android/res/BUILD                             |   4 +-
 android/run/BUILD                             |   4 +-
 android/sdk/BUILD                             |   4 +-
 android/ui.designer.overlays/BUILD            |   2 +-
 android/ui.resourcemanager/BUILD              |   4 +-
 android/ui/BUILD                              |   2 +-
 apkanalyzer/BUILD                             |   2 +-
 app-inspection/api/BUILD                      |   2 +-
 app-inspection/ide/BUILD                      |   8 +-
 app-inspection/ide/gradle/BUILD               |   2 +-
 app-inspection/inspector/api/BUILD            |   2 +-
 app-inspection/inspector/ide/BUILD            |   2 +-
 .../inspectors/backgroundtask/ide/BUILD       |   2 +-
 .../inspectors/backgroundtask/model/BUILD     |   2 +-
 .../inspectors/backgroundtask/view/BUILD      |   6 +-
 app-inspection/inspectors/database/BUILD      |   6 +-
 app-inspection/inspectors/network/ide/BUILD   |   4 +-
 app-inspection/inspectors/network/model/BUILD |   2 +-
 app-inspection/inspectors/network/view/BUILD  |   8 +-
 app-inspection/integration/BUILD              |   2 +-
 app-quality-insights/api/BUILD                |  14 +-
 app-quality-insights/ide/BUILD                |  18 +-
 app-quality-insights/play-vitals/ide/BUILD    |   8 +-
 .../play-vitals/integration-tests/BUILD       |   4 +-
 app-quality-insights/play-vitals/model/BUILD  |   6 +-
 app-quality-insights/play-vitals/view/BUILD   |   4 +-
 app-quality-insights/ui/BUILD                 |  18 +-
 artwork-compose/BUILD                         |   2 +-
 artwork/BUILD                                 |   2 +-
 as-driver/BUILD                               |  12 +-
 assistant/BUILD                               |   8 +-
 aswb/plugin_api/BUILD.OSS                     |  20 +-
 avd/BUILD                                     |   2 +-
 backup/BUILD                                  |   6 +-
 bleak-config/BUILD                            |   2 +-
 bleak/BUILD                                   |   2 +-
 build-attribution/BUILD                       |  16 +-
 build-common/BUILD                            |   6 +-
 codenavigation/BUILD                          |   2 +-
 compose-designer/BUILD                        |  16 +-
 compose-ide-plugin/BUILD                      |  14 +-
 connection-assistant/BUILD                    |   6 +-
 dagger/BUILD                                  |  10 +-
 databinding/BUILD                             |  10 +-
 debuggers/BUILD                               |  10 +-
 deploy/BUILD                                  |   2 +-
 designer-perf-tests/BUILD                     |   4 +-
 designer/BUILD                                |  18 +-
 designer/customview/BUILD                     |   8 +-
 device-explorer-common/BUILD                  |   2 +-
 device-explorer-files/BUILD                   |   4 +-
 device-explorer-monitor/BUILD                 |   4 +-
 device-explorer/BUILD                         |   6 +-
 device-manager-v2/BUILD                       |   2 +-
 device-manager-v2/integration/BUILD           |   2 +-
 execution/common/BUILD                        |   8 +-
 glance-designer/BUILD                         |   8 +-
 gmd-code-completion/BUILD                     |   6 +-
 gradle-declarative-lang-ide/BUILD             |   8 +-
 gradle-declarative-lang-sync/BUILD            |   4 +-
 gradle-declarative-lang/BUILD                 |   6 +-
 gradle-dsl-declarative/BUILD                  |   4 +-
 gradle-dsl-kotlin/BUILD                       |   4 +-
 gradle-dsl-toml/BUILD                         |   4 +-
 gradle-dsl/BUILD                              |  24 +-
 .../studio-gradle-tooling-api/BUILD           |   2 +-
 .../studio-gradle-tooling-impl/BUILD          |   4 +-
 ide-perf-tests/BUILD                          |   8 +-
 ij-debugger-tests/BUILD                       |   2 +-
 inspectors-common/api-ide/BUILD               |   2 +-
 inspectors-common/api/BUILD                   |   2 +-
 inspectors-common/ui/BUILD                    |   4 +-
 intellij-integration/BUILD                    |   4 +-
 intellij.android.avdmanager.tests/BUILD       |   2 +-
 intellij.android.compose-common/BUILD         |   8 +-
 intellij.android.device.tests/BUILD           |   2 +-
 intellij.android.device/BUILD                 |   2 +-
 jps-model/BUILD                               |   2 +-
 layout-inspector/BUILD                        |  18 +-
 layout-ui/BUILD                               |   2 +-
 layoutlib-loader/BUILD                        |   2 +-
 layoutlib/BUILD                               |   4 +-
 lint/BUILD                                    |  18 +-
 logcat/BUILD                                  |   8 +-
 memory-usage/BUILD                            |   2 +-
 ml-api/BUILD.bazel                            |   6 +-
 mlkit/BUILD                                   |   8 +-
 motion-editor/BUILD                           |   2 +-
 native-symbolizer/BUILD                       |   4 +-
 native-symbolizer/gradle/BUILD                |   2 +-
 nav/editor/BUILD                              |  14 +-
 nav/safeargs/common/BUILD                     |   4 +-
 nav/safeargs/common/gradle/BUILD              |   2 +-
 nav/safeargs/k1/BUILD                         |   4 +-
 nav/safeargs/k2/BUILD                         |   4 +-
 nav/safeargs/tests/common/BUILD               |   6 +-
 nav/safeargs/tests/k1/BUILD                   |   6 +-
 nav/safeargs/tests/k2/BUILD                   |   4 +-
 observable-demo/BUILD                         |   2 +-
 observable-ui/BUILD                           |   2 +-
 observable/BUILD                              |   2 +-
 old-agp-tests/BUILD                           |   6 +-
 platform-performance-testing/BUILD            |   2 +-
 preview-designer/BUILD                        |   8 +-
 preview-elements/BUILD                        |   4 +-
 profilers-android/BUILD                       |   2 +-
 profilers-android/gradle/BUILD                |   2 +-
 profilers-atrace/BUILD                        |   2 +-
 profilers-integration/BUILD                   |   2 +-
 profilers-ui/BUILD                            |   2 +-
 profilers/BUILD                               |   2 +-
 project-system-apk/BUILD                      |   2 +-
 project-system-gradle-models/BUILD            |   4 +-
 project-system-gradle-psd/BUILD               |  14 +-
 project-system-gradle-repository-search/BUILD |   6 +-
 project-system-gradle-sync-test-utils/BUILD   |   4 +-
 project-system-gradle-sync/BUILD              |  16 +-
 project-system-gradle-upgrade/BUILD           |  14 +-
 project-system-gradle/BUILD                   |  34 +-
 project-system-integration-tests/BUILD        |   2 +-
 project-system/BUILD                          |   6 +-
 render-resources/BUILD                        |   4 +-
 rendering/BUILD                               |   4 +-
 room/BUILD                                    |  10 +-
 rt/BUILD                                      |   2 +-
 safemode/BUILD                                |   4 +-
 samples-browser/BUILD                         |   2 +-
 screenshot-testing/BUILD                      |  12 +-
 screenshot-testing/gradle/BUILD               |   2 +-
 sdk-updates/BUILD                             |   6 +-
 server-flags/BUILD                            |   2 +-
 smali/BUILD                                   |   2 +-
 streaming/BUILD                               |  14 +-
 studio-updater/BUILD                          |   2 +-
 studio/BUILD                                  | 362 +++++++++---------
 swingp/BUILD                                  |   2 +-
 sync-memory-tests/BUILD                       |   4 +-
 sync-perf-tests/BUILD                         |   4 +-
 testartifacts/BUILD                           |  14 +-
 threading-checker/BUILD                       |   4 +-
 transport-database/BUILD                      |   2 +-
 uitest-framework/BUILD                        |   6 +-
 utp/BUILD                                     |   4 +-
 wear-designer/BUILD                           |   8 +-
 wear-pairing/BUILD                            |   6 +-
 wear-preview-elements/BUILD                   |   4 +-
 wear-whs/BUILD                                |   2 +-
 whats-new-assistant/BUILD                     |   6 +-
 wizard-model/BUILD                            |   2 +-
 wizard/BUILD                                  |   4 +-
 195 files changed, 761 insertions(+), 761 deletions(-)

diff --git a/adt-testutils/BUILD b/adt-testutils/BUILD
index 4d0735c7aa5..aae5ca82de9 100644
--- a/adt-testutils/BUILD
+++ b/adt-testutils/BUILD
@@ -24,14 +24,14 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/base/repository:studio.android.sdktools.repository[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
-        "@intellij//:org.toml.lang[test]",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang[test]",
         "@intellij//:test-framework[test]",
     ],
 )
diff --git a/adt-ui-model/BUILD b/adt-ui-model/BUILD
index e31d5c9df3a..8e6d5f573e5 100644
--- a/adt-ui-model/BUILD
+++ b/adt-ui-model/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
diff --git a/adt-ui/BUILD b/adt-ui/BUILD
index 63ae72a3f60..bbd7a423df4 100644
--- a/adt-ui/BUILD
+++ b/adt-ui/BUILD
@@ -29,15 +29,15 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
-        "@intellij//:com.intellij.platform.images[test]",
-        "@intellij//:intellij.webp[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.webp[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/flags:studio.android.sdktools.flags",
diff --git a/analytics/BUILD b/analytics/BUILD
index b72b37c7df9..57917960473 100644
--- a/analytics/BUILD
+++ b/analytics/BUILD
@@ -11,7 +11,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/.idea/libraries:HdrHistogram",
         "//tools/analytics-library/tracker:analytics-tracker",
diff --git a/android-adb-ui/BUILD b/android-adb-ui/BUILD
index 85a0cbdf56f..47a9581d40b 100644
--- a/android-adb-ui/BUILD
+++ b/android-adb-ui/BUILD
@@ -9,9 +9,9 @@ iml_module(
     visibility = ["//visibility:public"],
     # do not sort: must match IML order
     deps = [
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/base/adblib:studio.android.sdktools.adblib",
@@ -46,10 +46,10 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
-        "@intellij//:com.intellij.platform.images[test]",
-        "@intellij//:intellij.webp[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.webp[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/base/adblib:studio.android.sdktools.adblib[test]",
         "//tools/analytics-library/testing:android.sdktools.analytics-testing[test]",
diff --git a/android-adb/BUILD b/android-adb/BUILD
index 366c53214aa..634e998f420 100644
--- a/android-adb/BUILD
+++ b/android-adb/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
         "//tools/base/adblib:studio.android.sdktools.adblib",
         "//tools/adt/idea/.idea/libraries:zxing-core",
@@ -19,7 +19,7 @@ iml_module(
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "//tools/base/pixelprobe:studio.android.sdktools.pixelprobe",
         "//tools/base/device-provisioner:studio.android.sdktools.device-provisioner",
         "//tools/base/process-monitor:studio.android.sdktools.process-monitor",
@@ -66,9 +66,9 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:zxing-core[test]",
         "//tools/base/device-provisioner:studio.android.sdktools.device-provisioner",
@@ -91,7 +91,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib[test]",
         "//tools/base/fakeadbserver:studio.android.sdktools.fakeadbserver[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/android-common/BUILD b/android-common/BUILD
index e3e00787211..a1b89cf7cc7 100644
--- a/android-common/BUILD
+++ b/android-common/BUILD
@@ -13,9 +13,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/analytics-library/shared:analytics-shared",
         "//tools/adt/idea/.idea/libraries:truth[test]",
@@ -49,10 +49,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/analytics-library/shared:analytics-shared",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/android-kotlin/BUILD b/android-kotlin/BUILD
index 1248be5f564..f48a1646a09 100644
--- a/android-kotlin/BUILD
+++ b/android-kotlin/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core",
     ],
 )
@@ -25,9 +25,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/android-kotlin:intellij.android.kotlin.idea.common",
@@ -45,9 +45,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/base/sdk-common/gradle:studio.android.sdktools.sdk-common.gradle",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -71,8 +71,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -93,8 +93,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android-kotlin:intellij.android.kotlin.idea.common",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api",
@@ -126,14 +126,14 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/android-kotlin:intellij.android.kotlin.extensions.common",
         "//tools/analytics-library/crash:analytics-crash",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-kotlin:intellij.android.kotlin.tests[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
@@ -150,9 +150,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -183,9 +183,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/android-kotlin:intellij.android.kotlin.idea[test]",
@@ -215,6 +215,6 @@ kotlin_library(
     deps = [
         "//prebuilts/r8",
         "@intellij//:intellij-sdk",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
diff --git a/android-lang-databinding/BUILD b/android-lang-databinding/BUILD
index e3f8c2f7285..1a114329f52 100644
--- a/android-lang-databinding/BUILD
+++ b/android-lang-databinding/BUILD
@@ -14,8 +14,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/data-binding:studio.compilerCommon",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
@@ -53,8 +53,8 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "//tools/adt/idea/android-lang-databinding:intellij.android.lang-databinding[test]",
         "//tools/adt/idea/databinding:intellij.android.databinding[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/android-lang/BUILD b/android-lang/BUILD
index 666d5e8aa6a..cc88c2be35d 100644
--- a/android-lang/BUILD
+++ b/android-lang/BUILD
@@ -15,9 +15,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.intellij.intelliLang",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.intellij.intelliLang",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
@@ -66,9 +66,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-lang:intellij.android.lang[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/android-lint/BUILD b/android-lint/BUILD
index 93a37debc14..35e574b718a 100644
--- a/android-lint/BUILD
+++ b/android-lint/BUILD
@@ -14,9 +14,9 @@ iml_module(
         "//tools/adt/idea/lint:intellij.lint",
         "//tools/base/common:studio.android.sdktools.common",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/lint:studio.android.sdktools.lint-checks",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/jps-model:intellij.android.jps.model",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
@@ -24,13 +24,13 @@ iml_module(
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models",
         "//tools/adt/idea/project-system-gradle-upgrade:intellij.android.projectSystem.gradle.upgrade",
-        "@intellij//:com.intellij.properties",
-        "@intellij//:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository",
         "//tools/adt/idea/android:intellij.android.core",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/analytics",
@@ -91,7 +91,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/repository:studio.android.sdktools.repository[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/android-lint:intellij.android.lint[test]",
@@ -113,8 +113,8 @@ iml_module(
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
         "//tools/adt/idea/project-system-gradle-upgrade:intellij.android.projectSystem.gradle.upgrade[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "//tools/base/lint/libs/lint-tests:studio.android.sdktools.lint.testinfrastructure[test]",
         "//tools/adt/idea/android-kotlin:intellij.android.kotlin.idea[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl[test]",
diff --git a/android-material/BUILD b/android-material/BUILD
index b6ef623736f..7646ffe3f4e 100644
--- a/android-material/BUILD
+++ b/android-material/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
@@ -30,7 +30,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android-navigator/BUILD b/android-navigator/BUILD
index 7b2736f4327..ea5d0a41ffb 100644
--- a/android-navigator/BUILD
+++ b/android-navigator/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/artwork:intellij.android.artwork",
@@ -23,7 +23,7 @@ iml_module(
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/smali:intellij.android.smali",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:google-dexlib2",
         "//tools/adt/idea/analytics",
     ],
@@ -39,7 +39,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/testutils:studio.android.sdktools.testutils",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/android-navigator:intellij.android.navigator",
diff --git a/android-npw/BUILD b/android-npw/BUILD
index 1b0803fe6d8..fdae9412e2f 100644
--- a/android-npw/BUILD
+++ b/android-npw/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/observable:intellij.android.observable",
@@ -27,7 +27,7 @@ iml_module(
         "//tools/adt/idea/execution/common:intellij.android.execution.common",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
         "//tools/adt/idea/jps-model:intellij.android.jps.model",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/wizard/template-plugin:studio.intellij.android.wizardTemplate.plugin",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
@@ -137,12 +137,12 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android-npw:intellij.android.newProjectWizard[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
diff --git a/android-plugin/BUILD b/android-plugin/BUILD
index b3d224ce2b0..1076185e6b5 100644
--- a/android-plugin/BUILD
+++ b/android-plugin/BUILD
@@ -84,7 +84,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
diff --git a/android-templates/BUILD b/android-templates/BUILD
index 1d89ff71903..67e64af55b8 100644
--- a/android-templates/BUILD
+++ b/android-templates/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
@@ -22,7 +22,7 @@ iml_module(
         "//tools/adt/idea/jps-model:intellij.android.jps.model",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/base/wizard/template-plugin:studio.intellij.android.wizardTemplate.plugin",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository",
         "//tools/base/build-system:studio.android.sdktools.manifest-merger",
@@ -73,10 +73,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
@@ -102,7 +102,7 @@ iml_module(
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl.testutils[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
     ],
 )
diff --git a/android-test-framework/BUILD b/android-test-framework/BUILD
index e44b4ba421d..e222c931ec6 100644
--- a/android-test-framework/BUILD
+++ b/android-test-framework/BUILD
@@ -17,8 +17,8 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "//tools/analytics-library/crash:analytics-crash[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/android-lang-databinding:intellij.android.lang-databinding[test]",
@@ -36,8 +36,8 @@ iml_module(
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
         "//tools/adt/idea/project-system-gradle-sync:intellij.android.projectSystem.gradle.sync[test]",
         "//tools/adt/idea/project-system-gradle-upgrade:intellij.android.projectSystem.gradle.upgrade[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
-        "@intellij//:JUnit[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:JUnit[test]",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/android-navigator:intellij.android.navigator[test]",
diff --git a/android-transport/BUILD b/android-transport/BUILD
index 90fd321eacb..068466738a7 100644
--- a/android-transport/BUILD
+++ b/android-transport/BUILD
@@ -13,7 +13,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
diff --git a/android-uitests/BUILD b/android-uitests/BUILD
index 12ebc6b091d..4584926eeed 100644
--- a/android-uitests/BUILD
+++ b/android-uitests/BUILD
@@ -58,9 +58,9 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:emulator-proto[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
@@ -104,7 +104,7 @@ iml_module(
         "//tools/adt/idea/android-plugin:intellij.android.plugin[test]",
         "//tools/adt/idea/studio[test]",
         "//tools/adt/idea/app-inspection/api:app-inspection.api[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/intellij.android.compose-common[test]",
         "//tools/adt/idea/device-explorer-files:intellij.android.device-explorer-files[test]",
         "//tools/adt/idea/android-navigator:intellij.android.navigator[test]",
diff --git a/android/BUILD b/android/BUILD
index 17125443a8d..f6dd8f3a6d3 100644
--- a/android/BUILD
+++ b/android/BUILD
@@ -40,8 +40,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/analytics",
         "//tools/analytics-library/publisher:analytics-publisher",
         "//tools/adt/idea/build-common:intellij.android.buildCommon",
@@ -103,13 +103,13 @@ iml_module(
         "//tools/adt/idea/project-system-gradle-sync:intellij.android.projectSystem.gradle.sync",
         "//tools/adt/idea/intellij.android.compose-common",
         "//tools/adt/idea/server-flags:intellij.android.server-flags",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.jetbrains.plugins.gradle",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:com.intellij.properties",
-        "@intellij//:JUnit",
-        "@intellij//:com.intellij.platform.images",
-        "@intellij//:intellij.webp",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:JUnit",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:intellij.webp",
         "//tools/adt/idea/utp",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "//tools/base/lint:studio.android.sdktools.lint-checks",
@@ -131,7 +131,7 @@ iml_module(
         "//tools/adt/idea/preview-fast-compile:intellij.android.preview-fast-compile",
         "//tools/adt/idea/completion:intellij.android.completion",
         "//tools/base/backup:studio.android.sdktools.backup",
-        "@intellij//:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
         "//tools/adt/idea/testartifacts:intellij.android.testartifacts",
     ],
 )
@@ -188,10 +188,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
         "//tools/adt/idea/adt-ui-model:intellij.android.adt.ui.model[test]",
@@ -251,13 +251,13 @@ iml_module(
         "//tools/adt/idea/android:libandroid-core-proto",
         "//tools/adt/idea/android:libandroid-core-proto-test[test]",
         "//tools/adt/idea/server-flags:intellij.android.server-flags",
-        "@intellij//:com.intellij.java.ide[test]",
-        "@intellij//:com.intellij.java-i18n[test]",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:JUnit",
-        "@intellij//:com.intellij.properties",
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java.ide[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java-i18n[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:JUnit",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
         "//tools/adt/idea/project-system-gradle-repository-search:intellij.android.projectSystem.gradle.repositorySearch[test]",
         "//tools/adt/idea/project-system-gradle-sync:intellij.android.projectSystem.gradle.sync[test]",
@@ -269,7 +269,7 @@ iml_module(
         "//tools/adt/idea/intellij.android.compose-common[test]",
         "//tools/base/manifest-parser:studio.android.sdktools.manifest-parser",
         "//tools/base/common:studio.android.sdktools.common.testfixtures[test]",
-        "@intellij//:org.jetbrains.plugins.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle[test]",
         "//tools/base/deploy/deployer:studio.android.sdktools.deployer[test]",
         "//tools/adt/idea/android-lint:intellij.android.lint[test]",
         "//tools/adt/idea/android-navigator:intellij.android.navigator[test]",
@@ -277,7 +277,7 @@ iml_module(
         "//tools/base/threading-agent-callback:studio.android.sdktools.threading-agent-callback[test]",
         "//tools/adt/idea/compose-ide-plugin:intellij.android.compose-ide-plugin[test]",
         "//tools/adt/idea/execution/common:intellij.android.execution.common[test]",
-        "@intellij//:Coverage[test]",
+        "//prebuilts/studio/intellij-sdk:Coverage[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
         "//tools/adt/idea/streaming:intellij.android.streaming[test]",
@@ -647,7 +647,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
@@ -664,12 +664,12 @@ iml_module(
         "//tools/analytics-library/shared:analytics-shared[test]",
         "//tools/adt/idea/lint:intellij.lint[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "//tools/adt/idea/wizard-model:intellij.android.wizard.model[test]",
         "//tools/adt/idea/observable:intellij.android.observable[test]",
         "//tools/base/wizard/template-plugin:studio.intellij.android.wizardTemplate.plugin[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/android-lint:intellij.android.lint[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
         "//tools/adt/idea/execution/common:intellij.android.execution.common[test]",
diff --git a/android/actions/BUILD b/android/actions/BUILD
index 596620e9c23..75d5d520498 100644
--- a/android/actions/BUILD
+++ b/android/actions/BUILD
@@ -22,7 +22,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -33,7 +33,7 @@ iml_module(
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/project-system-gradle-psd:intellij.android.projectSystem.gradle.psd",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
diff --git a/android/apk/BUILD b/android/apk/BUILD
index e27c3b7de9f..2630a7c03c6 100644
--- a/android/apk/BUILD
+++ b/android/apk/BUILD
@@ -23,7 +23,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
diff --git a/android/completion/BUILD b/android/completion/BUILD
index ed7607cb752..9eed148697a 100644
--- a/android/completion/BUILD
+++ b/android/completion/BUILD
@@ -28,7 +28,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
diff --git a/android/configurations/BUILD b/android/configurations/BUILD
index 758844d0cb6..7ed454a0d96 100644
--- a/android/configurations/BUILD
+++ b/android/configurations/BUILD
@@ -24,7 +24,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
diff --git a/android/diagnostics/BUILD b/android/diagnostics/BUILD
index 80523dda235..2933094ae45 100644
--- a/android/diagnostics/BUILD
+++ b/android/diagnostics/BUILD
@@ -25,7 +25,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -43,7 +43,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
         "//tools/adt/idea/android/diagnostics:libandroid-core-proto",
         "//tools/adt/idea/server-flags:intellij.android.server-flags[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
diff --git a/android/editing/BUILD b/android/editing/BUILD
index 54067b6e9d0..41a7b0c19f2 100644
--- a/android/editing/BUILD
+++ b/android/editing/BUILD
@@ -22,7 +22,7 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
 )
diff --git a/android/editing/documentation/BUILD b/android/editing/documentation/BUILD
index 2341cc25f8d..0fb9aa0e19b 100644
--- a/android/editing/documentation/BUILD
+++ b/android/editing/documentation/BUILD
@@ -19,8 +19,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository",
         "//tools/adt/idea/android-common:intellij.android.common",
diff --git a/android/editing/metrics/BUILD b/android/editing/metrics/BUILD
index b64e7e6adca..c6e30671bd9 100644
--- a/android/editing/metrics/BUILD
+++ b/android/editing/metrics/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/android/editors.fast/BUILD b/android/editors.fast/BUILD
index 27d843a0af6..4399f76f96d 100644
--- a/android/editors.fast/BUILD
+++ b/android/editors.fast/BUILD
@@ -22,13 +22,13 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
diff --git a/android/editors.manifest/BUILD b/android/editors.manifest/BUILD
index 2e3c45e6099..06830efb900 100644
--- a/android/editors.manifest/BUILD
+++ b/android/editors.manifest/BUILD
@@ -27,7 +27,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android/editors.strings/BUILD b/android/editors.strings/BUILD
index b5d126872f0..13255ee3eb9 100644
--- a/android/editors.strings/BUILD
+++ b/android/editors.strings/BUILD
@@ -24,7 +24,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
diff --git a/android/editors/BUILD b/android/editors/BUILD
index 49291a52c86..38280e8294a 100644
--- a/android/editors/BUILD
+++ b/android/editors/BUILD
@@ -26,7 +26,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -39,9 +39,9 @@ iml_module(
         "//tools/adt/idea/wizard:intellij.android.wizard[test]",
         "//tools/adt/idea/wizard-model:intellij.android.wizard.model[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
-        "@intellij//:com.intellij.properties[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
     ],
diff --git a/android/gradle.project.sync/BUILD b/android/gradle.project.sync/BUILD
index acc887399bf..d64b9569e96 100644
--- a/android/gradle.project.sync/BUILD
+++ b/android/gradle.project.sync/BUILD
@@ -32,7 +32,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android/gradle/BUILD b/android/gradle/BUILD
index 115b3e1676e..777e0e90516 100644
--- a/android/gradle/BUILD
+++ b/android/gradle/BUILD
@@ -33,7 +33,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -43,7 +43,7 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
@@ -63,7 +63,7 @@ iml_module(
         "//tools/adt/idea/server-flags:intellij.android.server-flags[test]",
         "//tools/adt/idea/android/gradle:libandroid-core-proto[test]",
         "//tools/adt/idea/.idea/libraries:agp-version[test]",
-        "@intellij//:JUnit[test]",
+        "//prebuilts/studio/intellij-sdk:JUnit[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
         "//tools/adt/idea/gmaven:intellij.android.gmaven[test]",
     ],
diff --git a/android/gutter/BUILD b/android/gutter/BUILD
index 9d04096e90e..4aacb1b77aa 100644
--- a/android/gutter/BUILD
+++ b/android/gutter/BUILD
@@ -24,7 +24,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
@@ -33,7 +33,7 @@ iml_module(
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/project-system-gradle-psd:intellij.android.projectSystem.gradle.psd",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
diff --git a/android/imports/BUILD b/android/imports/BUILD
index 5057d2ba814..e2414fdfeea 100644
--- a/android/imports/BUILD
+++ b/android/imports/BUILD
@@ -31,14 +31,14 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/analytics-library/testing:android.sdktools.analytics-testing[test]",
diff --git a/android/instantapp/BUILD b/android/instantapp/BUILD
index 55ce329b9aa..0a255c006f4 100644
--- a/android/instantapp/BUILD
+++ b/android/instantapp/BUILD
@@ -27,7 +27,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
diff --git a/android/integration/BUILD b/android/integration/BUILD
index 07d816aee0d..34b70a6c15b 100644
--- a/android/integration/BUILD
+++ b/android/integration/BUILD
@@ -13,7 +13,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//prebuilts/tools/common/m2:junit-4.12[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/android/jetbrains/BUILD b/android/jetbrains/BUILD
index cb146fe433d..fcb91d4e4f1 100644
--- a/android/jetbrains/BUILD
+++ b/android/jetbrains/BUILD
@@ -33,7 +33,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -43,7 +43,7 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/project-system-gradle-psd:intellij.android.projectSystem.gradle.psd",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository[test]",
diff --git a/android/lang/BUILD b/android/lang/BUILD
index fa661e9a741..e8975048e3f 100644
--- a/android/lang/BUILD
+++ b/android/lang/BUILD
@@ -23,12 +23,12 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
     ],
 )
diff --git a/android/model/BUILD b/android/model/BUILD
index a1a55772e23..6d87d6235fe 100644
--- a/android/model/BUILD
+++ b/android/model/BUILD
@@ -22,7 +22,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android/modularize/BUILD b/android/modularize/BUILD
index 7ae4ac8d77a..46762696453 100644
--- a/android/modularize/BUILD
+++ b/android/modularize/BUILD
@@ -22,7 +22,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -30,7 +30,7 @@ iml_module(
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
         "//tools/adt/idea/artwork:intellij.android.artwork[test]",
diff --git a/android/navigator/BUILD b/android/navigator/BUILD
index 68f74091e2c..b82ff2d98fa 100644
--- a/android/navigator/BUILD
+++ b/android/navigator/BUILD
@@ -28,7 +28,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android/project/BUILD b/android/project/BUILD
index f7e0ff2f74b..ceaa57d172a 100644
--- a/android/project/BUILD
+++ b/android/project/BUILD
@@ -29,7 +29,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android/rendering/BUILD b/android/rendering/BUILD
index 0607ec48610..45d642a299a 100644
--- a/android/rendering/BUILD
+++ b/android/rendering/BUILD
@@ -30,7 +30,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -39,7 +39,7 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
diff --git a/android/res/BUILD b/android/res/BUILD
index 2fdd2e08a56..c7c860167e4 100644
--- a/android/res/BUILD
+++ b/android/res/BUILD
@@ -37,10 +37,10 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
     ],
 )
diff --git a/android/run/BUILD b/android/run/BUILD
index adf2d2201f0..fc9d50ac9c6 100644
--- a/android/run/BUILD
+++ b/android/run/BUILD
@@ -37,7 +37,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -47,7 +47,7 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/execution/common:intellij.android.execution.common[test]",
diff --git a/android/sdk/BUILD b/android/sdk/BUILD
index 87f41418b3d..ee1aeedd3eb 100644
--- a/android/sdk/BUILD
+++ b/android/sdk/BUILD
@@ -27,7 +27,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -35,7 +35,7 @@ iml_module(
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
diff --git a/android/ui.designer.overlays/BUILD b/android/ui.designer.overlays/BUILD
index c18bb2f0ad1..1881f160c39 100644
--- a/android/ui.designer.overlays/BUILD
+++ b/android/ui.designer.overlays/BUILD
@@ -22,7 +22,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/android/ui.resourcemanager/BUILD b/android/ui.resourcemanager/BUILD
index 9196af1de1d..cbc8839ae6a 100644
--- a/android/ui.resourcemanager/BUILD
+++ b/android/ui.resourcemanager/BUILD
@@ -26,7 +26,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -35,7 +35,7 @@ iml_module(
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
diff --git a/android/ui/BUILD b/android/ui/BUILD
index c5572e32139..7086df8fec5 100644
--- a/android/ui/BUILD
+++ b/android/ui/BUILD
@@ -24,7 +24,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
diff --git a/apkanalyzer/BUILD b/apkanalyzer/BUILD
index b9104feac99..17c263a2d28 100644
--- a/apkanalyzer/BUILD
+++ b/apkanalyzer/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:aapt-proto",
         "//tools/base/apkparser/analyzer:studio.android.sdktools.analyzer",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/app-inspection/api/BUILD b/app-inspection/api/BUILD
index 592de97a8b7..eae1cc9b156 100644
--- a/app-inspection/api/BUILD
+++ b/app-inspection/api/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-transport:intellij.android.transport",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/.idea/libraries:transport-proto",
diff --git a/app-inspection/ide/BUILD b/app-inspection/ide/BUILD
index 7750a0c0d4a..02808fd3651 100644
--- a/app-inspection/ide/BUILD
+++ b/app-inspection/ide/BUILD
@@ -11,8 +11,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/app-inspection/api:app-inspection.api",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -48,8 +48,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/app-inspection/ide/gradle/BUILD b/app-inspection/ide/gradle/BUILD
index 99bb82b4f98..ecb136bee23 100644
--- a/app-inspection/ide/gradle/BUILD
+++ b/app-inspection/ide/gradle/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/app-inspection/ide:app-inspection.ide",
diff --git a/app-inspection/inspector/api/BUILD b/app-inspection/inspector/api/BUILD
index 57da52c9266..1a2d197feff 100644
--- a/app-inspection/inspector/api/BUILD
+++ b/app-inspection/inspector/api/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/app-inspection/inspector/ide/BUILD b/app-inspection/inspector/ide/BUILD
index 76c8f7597df..a8be8762a62 100644
--- a/app-inspection/inspector/ide/BUILD
+++ b/app-inspection/inspector/ide/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-inspection/inspector/api:app-inspection.inspector.api",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
diff --git a/app-inspection/inspectors/backgroundtask/ide/BUILD b/app-inspection/inspectors/backgroundtask/ide/BUILD
index c11416416ad..26bc35d27ee 100644
--- a/app-inspection/inspectors/backgroundtask/ide/BUILD
+++ b/app-inspection/inspectors/backgroundtask/ide/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-inspection/inspector/ide:app-inspection.inspector.ide",
         "//tools/adt/idea/app-inspection/inspector/api:app-inspection.inspector.api",
         "//tools/adt/idea/artwork:intellij.android.artwork",
diff --git a/app-inspection/inspectors/backgroundtask/model/BUILD b/app-inspection/inspectors/backgroundtask/model/BUILD
index c9cca8c0ac8..96c2c945bba 100644
--- a/app-inspection/inspectors/backgroundtask/model/BUILD
+++ b/app-inspection/inspectors/backgroundtask/model/BUILD
@@ -25,7 +25,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-inspection/api:app-inspection.api",
         "//tools/adt/idea/app-inspection/inspector/api:app-inspection.inspector.api",
         "//tools/adt/idea/.idea/libraries:studio-grpc",
diff --git a/app-inspection/inspectors/backgroundtask/view/BUILD b/app-inspection/inspectors/backgroundtask/view/BUILD
index 6e74fbbd18e..547bc5fd2e5 100644
--- a/app-inspection/inspectors/backgroundtask/view/BUILD
+++ b/app-inspection/inspectors/backgroundtask/view/BUILD
@@ -25,7 +25,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-grpc",
         "//tools/adt/idea/.idea/libraries:studio-proto",
         "//tools/adt/idea/app-inspection/inspectors/backgroundtask/view:background-inspector-proto",
@@ -56,7 +56,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-proto[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/app-inspection/inspectors/backgroundtask/model:app-inspection.inspectors.backgroundtask.model[test]",
@@ -73,7 +73,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/app-inspection/inspectors/backgroundtask/view:background-inspector-proto[test]",
         "//tools/adt/idea/app-inspection/inspectors/backgroundtask/view:workmanager-inspector-proto[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/app-inspection/inspectors/backgroundtask/ide:app-inspection.inspectors.backgroundtask.ide[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/codenavigation[test]",
diff --git a/app-inspection/inspectors/database/BUILD b/app-inspection/inspectors/database/BUILD
index f8274365d0c..da6343ceab0 100644
--- a/app-inspection/inspectors/database/BUILD
+++ b/app-inspection/inspectors/database/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -52,8 +52,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/app-inspection/inspectors/database:app-inspection.inspectors.database[test]",
         "//tools/adt/idea/android-adb:intellij.android.adb[test]",
diff --git a/app-inspection/inspectors/network/ide/BUILD b/app-inspection/inspectors/network/ide/BUILD
index 678181e9633..456bf370afb 100644
--- a/app-inspection/inspectors/network/ide/BUILD
+++ b/app-inspection/inspectors/network/ide/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-inspection/inspector/ide:app-inspection.inspector.ide",
         "//tools/adt/idea/app-inspection/inspector/api:app-inspection.inspector.api",
         "//tools/adt/idea/artwork:intellij.android.artwork",
@@ -40,7 +40,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
diff --git a/app-inspection/inspectors/network/model/BUILD b/app-inspection/inspectors/network/model/BUILD
index c03c4703819..c5b649c9f77 100644
--- a/app-inspection/inspectors/network/model/BUILD
+++ b/app-inspection/inspectors/network/model/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/app-inspection/api:app-inspection.api",
diff --git a/app-inspection/inspectors/network/view/BUILD b/app-inspection/inspectors/network/view/BUILD
index 577a43745f6..2a6b6a56b7b 100644
--- a/app-inspection/inspectors/network/view/BUILD
+++ b/app-inspection/inspectors/network/view/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-inspection/inspector/ide:app-inspection.inspector.ide",
         "//tools/adt/idea/app-inspection/inspectors/network/model:app-inspection.inspectors.network.model",
         "//tools/adt/idea/.idea/libraries:studio-proto",
@@ -25,7 +25,7 @@ iml_module(
         "//tools/adt/idea/codenavigation",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/flags:studio.android.sdktools.flags",
-        "@intellij//:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
     ],
 )
 
@@ -40,7 +40,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:studio-proto[test]",
         "//tools/adt/idea/.idea/libraries:network_inspector_java_proto[test]",
@@ -64,6 +64,6 @@ iml_module(
         "//tools/analytics-library/tracker:analytics-tracker[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.modules.json[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json[test]",
     ],
 )
diff --git a/app-inspection/integration/BUILD b/app-inspection/integration/BUILD
index a5ac392c2c2..8f1efa05499 100644
--- a/app-inspection/integration/BUILD
+++ b/app-inspection/integration/BUILD
@@ -16,7 +16,7 @@ iml_module(
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
 )
diff --git a/app-quality-insights/api/BUILD b/app-quality-insights/api/BUILD
index 2f024e675f0..8d4ffe7bea9 100644
--- a/app-quality-insights/api/BUILD
+++ b/app-quality-insights/api/BUILD
@@ -12,9 +12,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
@@ -36,11 +36,11 @@ iml_module(
         "//tools/adt/idea/app-quality-insights/api:libandroid-core-proto",
         "//tools/adt/idea/server-flags:intellij.android.server-flags",
         "//tools/adt/idea/ml-api:intellij.android.ml-api",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
-        "@intellij//:intellij.platform.vcs.impl[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
-        "@intellij//:intellij.libraries.grpc",
-        "@intellij//:intellij.libraries.grpc.netty.shaded",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc.netty.shaded",
     ],
 )
 
diff --git a/app-quality-insights/ide/BUILD b/app-quality-insights/ide/BUILD
index bd104f802cc..b2ee8e15e6b 100644
--- a/app-quality-insights/ide/BUILD
+++ b/app-quality-insights/ide/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/artwork:intellij.android.artwork",
@@ -18,11 +18,11 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/adt/idea/android:intellij.android.core",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/analytics",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
     ],
 )
 
@@ -52,7 +52,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-quality-insights/api:intellij.android.app-quality-insights.api[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
@@ -62,7 +62,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/app-quality-insights/ui:intellij.android.app-quality-insights.ui[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
@@ -72,10 +72,10 @@ iml_module(
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
         "//tools/adt/idea/app-quality-insights/ui:intellij.android.app-quality-insights.ui.tests[test]",
         "//tools/vendor/google/git4insights[test]",
-        "@intellij//:Git4Idea[test]",
+        "//prebuilts/studio/intellij-sdk:Git4Idea[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
-        "@intellij//:intellij.platform.vcs.impl[test]",
-        "@intellij//:intellij.platform.vcs.dvcs.impl[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
     ],
 )
diff --git a/app-quality-insights/play-vitals/ide/BUILD b/app-quality-insights/play-vitals/ide/BUILD
index ee09e635912..92bc9345b56 100644
--- a/app-quality-insights/play-vitals/ide/BUILD
+++ b/app-quality-insights/play-vitals/ide/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/app-quality-insights/ide:intellij.android.app-quality-insights.ide",
@@ -24,7 +24,7 @@ iml_module(
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/ml-api:intellij.android.ml-api",
-        "@intellij//:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
     ],
 )
 
@@ -39,7 +39,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
@@ -57,6 +57,6 @@ iml_module(
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
-        "@intellij//:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
     ],
 )
diff --git a/app-quality-insights/play-vitals/integration-tests/BUILD b/app-quality-insights/play-vitals/integration-tests/BUILD
index 1cc668b0a4e..1b7203d99a3 100644
--- a/app-quality-insights/play-vitals/integration-tests/BUILD
+++ b/app-quality-insights/play-vitals/integration-tests/BUILD
@@ -14,14 +14,14 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/adt/idea/app-quality-insights/api:intellij.android.app-quality-insights.api[test]",
         "//tools/adt/idea/app-quality-insights/play-vitals/model:intellij.android.app-quality-insights.play-vitals.model[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
-        "@intellij//:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
     ],
 )
 
diff --git a/app-quality-insights/play-vitals/model/BUILD b/app-quality-insights/play-vitals/model/BUILD
index 63faecef3e2..527b1e0ad12 100644
--- a/app-quality-insights/play-vitals/model/BUILD
+++ b/app-quality-insights/play-vitals/model/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-quality-insights/api:intellij.android.app-quality-insights.api",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/app-quality-insights/play-vitals/model:libplay_vitals_java_proto",
@@ -28,8 +28,8 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/studio-grpc-testutils:studio.studio-grpc-testutils[test]",
         "//tools/adt/idea/app-quality-insights/play-vitals/model:libgemini_java_proto",
-        "@intellij//:intellij.libraries.grpc",
-        "@intellij//:intellij.libraries.grpc.netty.shaded",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc.netty.shaded",
     ],
 )
 
diff --git a/app-quality-insights/play-vitals/view/BUILD b/app-quality-insights/play-vitals/view/BUILD
index 2f800c046b6..9d8b14506be 100644
--- a/app-quality-insights/play-vitals/view/BUILD
+++ b/app-quality-insights/play-vitals/view/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -34,7 +34,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "@intellij//:test-framework[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
diff --git a/app-quality-insights/ui/BUILD b/app-quality-insights/ui/BUILD
index 01f582d34f8..6c6fc2660b2 100644
--- a/app-quality-insights/ui/BUILD
+++ b/app-quality-insights/ui/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/app-quality-insights/api:intellij.android.app-quality-insights.api",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/base/flags:studio.android.sdktools.flags",
@@ -22,11 +22,11 @@ iml_module(
         "//tools/adt/idea/adt-ui-model:intellij.android.adt.ui.model",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/ml-api:intellij.android.ml-api",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:intellij.platform.vcs.log.impl",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.log.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
         "//tools/studio/google/cloud/tools/google-login-plugin:google-login-as",
-        "@intellij//:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
     ],
 )
 
@@ -41,8 +41,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -63,8 +63,8 @@ iml_module(
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
         "//tools/adt/idea/ml-api:intellij.android.ml-api[test]",
         "//tools/adt/idea/server-flags:intellij.android.server-flags[test]",
-        "@intellij//:intellij.platform.vcs.impl[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl[test]",
         "//tools/studio/google/cloud/tools/google-login-plugin:google-login-as[test]",
-        "@intellij//:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
     ],
 )
diff --git a/artwork-compose/BUILD b/artwork-compose/BUILD
index 4d16418383e..b9b1f855763 100644
--- a/artwork-compose/BUILD
+++ b/artwork-compose/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/adt-ui-compose:intellij.android.adt.ui.compose",
         "//tools/adt/idea/artwork:intellij.android.artwork",
     ],
diff --git a/artwork/BUILD b/artwork/BUILD
index a3e1039f06c..b799aed0e8b 100644
--- a/artwork/BUILD
+++ b/artwork/BUILD
@@ -13,7 +13,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
diff --git a/as-driver/BUILD b/as-driver/BUILD
index e5743ecc5e9..e57b8c99d8f 100644
--- a/as-driver/BUILD
+++ b/as-driver/BUILD
@@ -35,8 +35,8 @@ intellij_plugin(
     ],
     plugin_id = "com.android.tools.asdriver",
     deps = [
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.jetbrains.performancePlugin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.jetbrains.performancePlugin",
     ],
 )
 
@@ -76,7 +76,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:studio-proto[test]",
         "//tools/adt/idea/as-driver:asdriver_proto",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/base/perf-logger:studio.perf-logger[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
@@ -104,7 +104,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
@@ -125,12 +125,12 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:studio-proto",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/as-driver:asdriver_proto",
         "//tools/adt/idea/.idea/libraries:studio-grpc",
         "//tools/adt/idea/bleak:intellij.android.bleak",
         "//tools/adt/idea/bleak-config:intellij.android.bleak-config",
-        "@intellij//:com.jetbrains.performancePlugin",
+        "//prebuilts/studio/intellij-sdk:com.jetbrains.performancePlugin",
         "//tools/adt/idea/adt-ui-compose:intellij.android.adt.ui.compose",
     ],
 )
diff --git a/assistant/BUILD b/assistant/BUILD
index 0c3a77b4841..6fa2deed557 100644
--- a/assistant/BUILD
+++ b/assistant/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/artwork:intellij.android.artwork",
@@ -38,8 +38,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/aswb/plugin_api/BUILD.OSS b/aswb/plugin_api/BUILD.OSS
index 47b7512facb..990fa7c8010 100644
--- a/aswb/plugin_api/BUILD.OSS
+++ b/aswb/plugin_api/BUILD.OSS
@@ -7,7 +7,7 @@ java_library(
     visibility = ["//visibility:private"],
     exports = [
         "//prebuilts/tools/common/m2:jsr305-2.0.1",
-        "@intellij//:JUnit",
+        "//prebuilts/studio/intellij-sdk:JUnit",
         "@intellij//:com.android.tools.apk",
         "@intellij//:com.android.tools.design",
         "@intellij//:com.android.tools.idea.smali",
@@ -17,12 +17,12 @@ java_library(
         "@intellij//:com.intellij.cidr.debugger",
         "@intellij//:com.intellij.cidr.lang",
         "@intellij//:com.intellij.cidr.lang.clangd",
-        "@intellij//:com.intellij.java",
-        "@intellij//:intellij.platform.coverage",
-        "@intellij//:intellij.platform.coverage.agent",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage.agent",
         "@intellij//:intellij-sdk",
         "@intellij//:org.jetbrains.android",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -57,7 +57,7 @@ java_library(
     name = "kotlin",
     neverlink = 1,
     exports = [
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -65,7 +65,7 @@ java_library(
     name = "kotlin_for_tests",
     testonly = 1,
     exports = [
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -73,7 +73,7 @@ java_library(
     name = "junit",
     neverlink = 1,
     exports = [
-        "@intellij//:JUnit",
+        "//prebuilts/studio/intellij-sdk:JUnit",
     ],
 )
 
@@ -81,7 +81,7 @@ java_library(
     name = "terminal",
     neverlink = 1,
     exports = [
-        "@intellij//:org.jetbrains.plugins.terminal",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.terminal",
     ],
 )
 
@@ -89,7 +89,7 @@ java_library(
     name = "devkit",
     neverlink = 1,
     exports = [
-        "@intellij//:DevKit",
+        "//prebuilts/studio/intellij-sdk:DevKit",
     ],
 )
 
diff --git a/avd/BUILD b/avd/BUILD
index a25dd728923..19be24bd64d 100644
--- a/avd/BUILD
+++ b/avd/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "@intellij//:intellij-sdk",
         "@intellij//:test-framework[test]",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/backup/BUILD b/backup/BUILD
index f3a34523ad9..bdeaf7bdfe6 100644
--- a/backup/BUILD
+++ b/backup/BUILD
@@ -12,7 +12,7 @@ iml_module(
     deps = [
         "@intellij//:intellij-sdk",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/base/adblib:studio.android.sdktools.adblib",
         "//tools/base/backup:studio.android.sdktools.backup",
@@ -44,7 +44,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
@@ -74,7 +74,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/base/backup:studio.android.sdktools.backup",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
diff --git a/bleak-config/BUILD b/bleak-config/BUILD
index ec46603cedc..e01d64bde22 100644
--- a/bleak-config/BUILD
+++ b/bleak-config/BUILD
@@ -10,6 +10,6 @@ iml_module(
     deps = [
         "//tools/adt/idea/bleak:intellij.android.bleak",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
diff --git a/bleak/BUILD b/bleak/BUILD
index a919801aae8..4fb5da20a28 100644
--- a/bleak/BUILD
+++ b/bleak/BUILD
@@ -9,6 +9,6 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
diff --git a/build-attribution/BUILD b/build-attribution/BUILD
index f5aea240fab..9ce529cfeab 100644
--- a/build-attribution/BUILD
+++ b/build-attribution/BUILD
@@ -16,8 +16,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
@@ -27,10 +27,10 @@ iml_module(
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
-        "@intellij//:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
         "//tools/adt/idea/.idea/libraries:studio-proto",
         "//tools/adt/idea/build-attribution:build-analysis-results-proto",
         "//tools/adt/idea/analytics",
@@ -79,8 +79,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -101,8 +101,8 @@ iml_module(
         "//tools/analytics-library/testing:android.sdktools.analytics-testing[test]",
         "//tools/analytics-library/tracker:analytics-tracker[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl.testutils[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl[test]",
         "//tools/adt/idea/.idea/libraries:studio-proto",
diff --git a/build-common/BUILD b/build-common/BUILD
index 1a7b2adb8e7..51011740a18 100644
--- a/build-common/BUILD
+++ b/build-common/BUILD
@@ -16,12 +16,12 @@ iml_module(
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
     ],
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
         "//tools/base/device_validator:studio.android.sdktools.dvlib",
@@ -29,6 +29,6 @@ iml_module(
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
     ],
 )
diff --git a/codenavigation/BUILD b/codenavigation/BUILD
index 0619dc66f43..62d56ea5c29 100644
--- a/codenavigation/BUILD
+++ b/codenavigation/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/native-symbolizer",
diff --git a/compose-designer/BUILD b/compose-designer/BUILD
index 7d0be936283..2c623f9dd8d 100644
--- a/compose-designer/BUILD
+++ b/compose-designer/BUILD
@@ -15,8 +15,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/designer:intellij.android.designer",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
@@ -135,11 +135,11 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/compose-designer:intellij.android.compose-designer[test]",
@@ -239,9 +239,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:JUnit",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:JUnit",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
diff --git a/compose-ide-plugin/BUILD b/compose-ide-plugin/BUILD
index de1df98fddd..87d0447fe31 100644
--- a/compose-ide-plugin/BUILD
+++ b/compose-ide-plugin/BUILD
@@ -11,8 +11,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/flags:studio.android.sdktools.flags",
@@ -24,7 +24,7 @@ iml_module(
         "//tools/adt/idea/execution/common:intellij.android.execution.common",
         "//tools/adt/idea/android-material:intellij.android.android-material",
         "//tools/adt/idea/completion:intellij.android.completion",
-        "@intellij//:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
     ],
 )
 
@@ -57,15 +57,15 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "//tools/adt/idea/.idea/libraries:truth",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework",
         "//tools/base/testutils:studio.android.sdktools.testutils",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/compose-ide-plugin:intellij.android.compose-ide-plugin[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/artwork:intellij.android.artwork[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
@@ -80,7 +80,7 @@ iml_module(
         "//tools/adt/idea/android-material:intellij.android.android-material[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
-        "@intellij//:com.intellij.modules.json[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
     ],
 )
diff --git a/connection-assistant/BUILD b/connection-assistant/BUILD
index f026e3d1321..e40425a630a 100644
--- a/connection-assistant/BUILD
+++ b/connection-assistant/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/analytics-library/tracker:analytics-tracker",
@@ -42,8 +42,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/analytics-library/tracker:analytics-tracker",
diff --git a/dagger/BUILD b/dagger/BUILD
index 9e200e715bc..73cb1499a65 100644
--- a/dagger/BUILD
+++ b/dagger/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
@@ -44,9 +44,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/databinding/BUILD b/databinding/BUILD
index 215b4231d40..d2132c299dc 100644
--- a/databinding/BUILD
+++ b/databinding/BUILD
@@ -11,8 +11,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
@@ -62,11 +62,11 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
diff --git a/debuggers/BUILD b/debuggers/BUILD
index 42f3eb9c730..297bca8c247 100644
--- a/debuggers/BUILD
+++ b/debuggers/BUILD
@@ -12,16 +12,16 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/deploy:intellij.android.deploy",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/flags:studio.android.sdktools.flags",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/debuggers:libjava_sites",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "//tools/base/lint:studio.android.sdktools.lint-api",
         "//tools/adt/idea/execution/common:intellij.android.execution.common",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
@@ -51,7 +51,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/debuggers:intellij.android.debuggers[test]",
@@ -85,6 +85,6 @@ kotlin_library(
     visibility = ["//visibility:public"],
     deps = [
         "//tools/adt/idea/debuggers:intellij.android.debuggers",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
diff --git a/deploy/BUILD b/deploy/BUILD
index ed87e22804f..d7bc4034312 100644
--- a/deploy/BUILD
+++ b/deploy/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
         "//tools/base/deploy/deployer:studio.android.sdktools.deployer",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
diff --git a/designer-perf-tests/BUILD b/designer-perf-tests/BUILD
index a0be3cc3eb4..f0c3ba96785 100644
--- a/designer-perf-tests/BUILD
+++ b/designer-perf-tests/BUILD
@@ -114,8 +114,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/base/perf-logger:studio.perf-logger[test]",
diff --git a/designer/BUILD b/designer/BUILD
index f9ea0514447..beaa23631b1 100644
--- a/designer/BUILD
+++ b/designer/BUILD
@@ -16,9 +16,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/base/pixelprobe:studio.android.sdktools.pixelprobe",
@@ -48,7 +48,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/analytics-library/testing:android.sdktools.analytics-testing[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-api",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
         "//tools/adt/idea/rendering:intellij.android.rendering",
@@ -105,10 +105,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/designer:intellij.android.designer[test]",
@@ -137,7 +137,7 @@ iml_module(
         "//tools/adt/idea/layout-ui:intellij.android.layout-ui[test]",
         "//tools/adt/idea/.idea/libraries:layoutlib[test]",
         "//tools/adt/idea/lint:intellij.lint[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/layoutlib:intellij.android.layoutlib[test]",
         "//tools/adt/idea/android-lint:intellij.android.lint[test]",
         "//tools/base/lint:studio.android.sdktools.lint-api[test]",
@@ -187,10 +187,10 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
-        "@intellij//:JUnit",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:JUnit",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/testutils:studio.android.sdktools.testutils",
     ],
 )
diff --git a/designer/customview/BUILD b/designer/customview/BUILD
index eb7635cbd5c..00baa888323 100644
--- a/designer/customview/BUILD
+++ b/designer/customview/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/designer:intellij.android.designer",
@@ -57,8 +57,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
diff --git a/device-explorer-common/BUILD b/device-explorer-common/BUILD
index 24aabe19c26..e62245a9d97 100644
--- a/device-explorer-common/BUILD
+++ b/device-explorer-common/BUILD
@@ -10,7 +10,7 @@ iml_module(
     deps = [
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/device-provisioner:studio.android.sdktools.device-provisioner",
     ],
diff --git a/device-explorer-files/BUILD b/device-explorer-files/BUILD
index 8e03477b9e0..dd7575b19d9 100644
--- a/device-explorer-files/BUILD
+++ b/device-explorer-files/BUILD
@@ -13,7 +13,7 @@ iml_module(
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
         "//tools/base/flags:studio.android.sdktools.flags",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/adt/idea/android-adb:intellij.android.adb",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -45,7 +45,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/device-explorer-files:intellij.android.device-explorer-files[test]",
         "//tools/adt/idea/device-explorer-common:intellij.android.device-explorer-common[test]",
diff --git a/device-explorer-monitor/BUILD b/device-explorer-monitor/BUILD
index 2a119234c7a..ceebe96e2c2 100644
--- a/device-explorer-monitor/BUILD
+++ b/device-explorer-monitor/BUILD
@@ -25,7 +25,7 @@ iml_module(
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/execution/common:intellij.android.execution.common",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/base/device-provisioner:studio.android.sdktools.device-provisioner",
@@ -49,7 +49,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/device-explorer-monitor:intellij.android.device-explorer-monitor[test]",
         "//tools/adt/idea/device-explorer-common:intellij.android.device-explorer-common[test]",
diff --git a/device-explorer/BUILD b/device-explorer/BUILD
index c5bac3b6f85..a74df8213d1 100644
--- a/device-explorer/BUILD
+++ b/device-explorer/BUILD
@@ -14,7 +14,7 @@ iml_module(
         "//tools/adt/idea/device-explorer-monitor:intellij.android.device-explorer-monitor",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-adb:intellij.android.adb",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/artwork:intellij.android.artwork",
@@ -44,7 +44,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/device-explorer-common:intellij.android.device-explorer-common[test]",
         "//tools/adt/idea/device-explorer:intellij.android.device-explorer[test]",
@@ -71,7 +71,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/device-explorer:intellij.android.device-explorer[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
diff --git a/device-manager-v2/BUILD b/device-manager-v2/BUILD
index 8f5fb031486..8a60649cfc4 100644
--- a/device-manager-v2/BUILD
+++ b/device-manager-v2/BUILD
@@ -15,7 +15,7 @@ iml_module(
     deps = [
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/android-common:intellij.android.common",
diff --git a/device-manager-v2/integration/BUILD b/device-manager-v2/integration/BUILD
index 6c1b26cac38..1d8e307064b 100644
--- a/device-manager-v2/integration/BUILD
+++ b/device-manager-v2/integration/BUILD
@@ -14,7 +14,7 @@ iml_module(
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
 )
diff --git a/execution/common/BUILD b/execution/common/BUILD
index d4ed4d47d8d..008723b4161 100644
--- a/execution/common/BUILD
+++ b/execution/common/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/deploy/deployer:studio.android.sdktools.deployer",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
         "//tools/base/flags:studio.android.sdktools.flags",
@@ -65,8 +65,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/execution/common:intellij.android.execution.common",
         "//tools/adt/idea/.idea/libraries:truth",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework",
diff --git a/glance-designer/BUILD b/glance-designer/BUILD
index a3f2d9ecdd6..ad0d21a8839 100644
--- a/glance-designer/BUILD
+++ b/glance-designer/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/designer:intellij.android.designer",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
@@ -20,7 +20,7 @@ iml_module(
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/preview-designer:intellij.android.preview-designer",
         "//tools/base/flags:studio.android.sdktools.flags",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
         "//tools/adt/idea/preview-elements:intellij.android.preview-elements",
         "//tools/adt/idea/rendering:intellij.android.rendering",
@@ -40,8 +40,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/designer:intellij.android.designer[test]",
diff --git a/gmd-code-completion/BUILD b/gmd-code-completion/BUILD
index e59fc521746..a73419e0ae9 100644
--- a/gmd-code-completion/BUILD
+++ b/gmd-code-completion/BUILD
@@ -20,7 +20,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/studio/google/cloud/testing/firebase-testing",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -28,8 +28,8 @@ iml_module(
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
         "//tools/studio/google/cloud/tools/google-login-plugin:google-login-as",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/gradle-declarative-lang-ide/BUILD b/gradle-declarative-lang-ide/BUILD
index c36ef8daca1..b2ba6b71cc6 100644
--- a/gradle-declarative-lang-ide/BUILD
+++ b/gradle-declarative-lang-ide/BUILD
@@ -13,9 +13,9 @@ iml_module(
         "@intellij//:intellij-sdk",
         "//tools/adt/idea/gradle-declarative-lang:intellij.android.gradle.declarative.lang",
         "//tools/adt/idea/gradle-declarative-lang-sync:intellij.android.gradle.declarative.lang.sync",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
     ],
 )
 
@@ -36,7 +36,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:mockito",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/gradle-declarative-lang-ide:intellij.android.gradle.declarative.lang.ide[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/gradle-declarative-lang:intellij.android.gradle.declarative.lang[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
diff --git a/gradle-declarative-lang-sync/BUILD b/gradle-declarative-lang-sync/BUILD
index c1774472a63..f881d277496 100644
--- a/gradle-declarative-lang-sync/BUILD
+++ b/gradle-declarative-lang-sync/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
     ],
 )
diff --git a/gradle-declarative-lang/BUILD b/gradle-declarative-lang/BUILD
index 3077b3a638e..a305fed685e 100644
--- a/gradle-declarative-lang/BUILD
+++ b/gradle-declarative-lang/BUILD
@@ -14,8 +14,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
@@ -37,7 +37,7 @@ iml_module(
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/.idea/libraries:mockito",
         "//tools/adt/idea/android:intellij.android.core[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/lint:intellij.lint[test]",
         "//tools/base/lint:studio.android.sdktools.lint-api[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
diff --git a/gradle-dsl-declarative/BUILD b/gradle-dsl-declarative/BUILD
index 71ca9cbc96c..5bee69515e9 100644
--- a/gradle-dsl-declarative/BUILD
+++ b/gradle-dsl-declarative/BUILD
@@ -11,8 +11,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
         "//tools/adt/idea/gradle-declarative-lang:intellij.android.gradle.declarative.lang",
     ],
diff --git a/gradle-dsl-kotlin/BUILD b/gradle-dsl-kotlin/BUILD
index d6bed8663ad..c5618c5e652 100644
--- a/gradle-dsl-kotlin/BUILD
+++ b/gradle-dsl-kotlin/BUILD
@@ -9,8 +9,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
     ],
 )
diff --git a/gradle-dsl-toml/BUILD b/gradle-dsl-toml/BUILD
index cf598a9bd95..19bf0deea6a 100644
--- a/gradle-dsl-toml/BUILD
+++ b/gradle-dsl-toml/BUILD
@@ -9,8 +9,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/flags:studio.android.sdktools.flags",
diff --git a/gradle-dsl/BUILD b/gradle-dsl/BUILD
index d1bd9dd4657..619823c141a 100644
--- a/gradle-dsl/BUILD
+++ b/gradle-dsl/BUILD
@@ -32,8 +32,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/flags:studio.android.sdktools.flags",
     ],
@@ -52,10 +52,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl[test]",
         "//tools/adt/idea/gradle-dsl-kotlin:intellij.android.gradle.dsl.kotlin[test]",
@@ -71,7 +71,7 @@ iml_module(
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/gradle-declarative-lang-ide:intellij.android.gradle.declarative.lang.ide",
         "//tools/adt/idea/.idea/libraries:mockito",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
         "//tools/adt/idea/gradle-declarative-lang:intellij.android.gradle.declarative.lang[test]",
     ],
 )
@@ -88,15 +88,15 @@ iml_module(
         "//tools/adt/idea/gradle-dsl-kotlin:intellij.android.gradle.dsl.kotlin",
         "//tools/adt/idea/gradle-dsl-toml:intellij.android.gradle.dsl.toml",
         "//tools/adt/idea/gradle-dsl-declarative:intellij.android.gradle.dsl.declarative",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
     ],
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/gradle-tooling/studio-gradle-tooling-api/BUILD b/gradle-tooling/studio-gradle-tooling-api/BUILD
index 8dff642c9af..f7ad2908f69 100644
--- a/gradle-tooling/studio-gradle-tooling-api/BUILD
+++ b/gradle-tooling/studio-gradle-tooling-api/BUILD
@@ -10,6 +10,6 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
diff --git a/gradle-tooling/studio-gradle-tooling-impl/BUILD b/gradle-tooling/studio-gradle-tooling-impl/BUILD
index c77147560dd..e9c5f765e9b 100644
--- a/gradle-tooling/studio-gradle-tooling-impl/BUILD
+++ b/gradle-tooling/studio-gradle-tooling-impl/BUILD
@@ -13,8 +13,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:javax-inject",
         "//tools/adt/idea/gradle-tooling/studio-gradle-tooling-api:intellij.android.gradle-tooling.api",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/ide-perf-tests/BUILD b/ide-perf-tests/BUILD
index 02c95f6c2e8..6a5c5d5b012 100644
--- a/ide-perf-tests/BUILD
+++ b/ide-perf-tests/BUILD
@@ -103,10 +103,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/perf-logger:studio.perf-logger[test]",
diff --git a/ij-debugger-tests/BUILD b/ij-debugger-tests/BUILD
index 0ef17ae221d..c735f273f36 100644
--- a/ij-debugger-tests/BUILD
+++ b/ij-debugger-tests/BUILD
@@ -216,7 +216,7 @@ kotlin_library(
         ":kotlin.jvm-debugger.test_lib_import",
         "//tools/adt/idea/android-kotlin:android-dexer",
         "//tools/adt/idea/debuggers:android-field-visibility-provider",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "@maven//:junit.junit",
     ],
 )
diff --git a/inspectors-common/api-ide/BUILD b/inspectors-common/api-ide/BUILD
index 2b1e38fda74..2ab3756a93b 100644
--- a/inspectors-common/api-ide/BUILD
+++ b/inspectors-common/api-ide/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/inspectors-common/api:intellij.android.inspectors-common.api",
         "//tools/adt/idea/native-symbolizer",
         "//tools/adt/idea/android:intellij.android.core",
diff --git a/inspectors-common/api/BUILD b/inspectors-common/api/BUILD
index 5a5f3629b2b..31c9e7d45e3 100644
--- a/inspectors-common/api/BUILD
+++ b/inspectors-common/api/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/adt-ui-model:intellij.android.adt.ui.model",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/inspectors-common/ui/BUILD b/inspectors-common/ui/BUILD
index 58c66040744..38f8e5dffe2 100644
--- a/inspectors-common/ui/BUILD
+++ b/inspectors-common/ui/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/adt-ui-model:intellij.android.adt.ui.model",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/inspectors-common/api:intellij.android.inspectors-common.api",
@@ -23,6 +23,6 @@ iml_module(
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/codenavigation",
-        "@intellij//:com.intellij.modules.json[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json[test]",
     ],
 )
diff --git a/intellij-integration/BUILD b/intellij-integration/BUILD
index c084956ccac..9e7f3e6d876 100644
--- a/intellij-integration/BUILD
+++ b/intellij-integration/BUILD
@@ -11,9 +11,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/intellij.android.avdmanager.tests/BUILD b/intellij.android.avdmanager.tests/BUILD
index 1395c54286d..bc9f4309ad6 100644
--- a/intellij.android.avdmanager.tests/BUILD
+++ b/intellij.android.avdmanager.tests/BUILD
@@ -21,7 +21,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/.idea/libraries:studio-proto",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/base/repository:studio.android.sdktools.repository",
diff --git a/intellij.android.compose-common/BUILD b/intellij.android.compose-common/BUILD
index 0892e731abd..8e136951b45 100644
--- a/intellij.android.compose-common/BUILD
+++ b/intellij.android.compose-common/BUILD
@@ -9,8 +9,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
@@ -35,8 +35,8 @@ iml_module(
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/.idea/libraries:truth",
     ],
 )
diff --git a/intellij.android.device.tests/BUILD b/intellij.android.device.tests/BUILD
index 51bacef1e3e..37a4c4bbb34 100644
--- a/intellij.android.device.tests/BUILD
+++ b/intellij.android.device.tests/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/base/sdklib:studio.android.sdktools.sdklib[test]",
diff --git a/intellij.android.device/BUILD b/intellij.android.device/BUILD
index 941aa2bb67a..792bb655bb0 100644
--- a/intellij.android.device/BUILD
+++ b/intellij.android.device/BUILD
@@ -12,7 +12,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/adt-ui-compose:intellij.android.adt.ui.compose",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/android:intellij.android.core",
diff --git a/jps-model/BUILD b/jps-model/BUILD
index 9bbb25731d5..0fc58614328 100644
--- a/jps-model/BUILD
+++ b/jps-model/BUILD
@@ -11,6 +11,6 @@ iml_module(
     deps = [
         "//tools/base/common:studio.android.sdktools.common",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
diff --git a/layout-inspector/BUILD b/layout-inspector/BUILD
index cd729f564cb..d00045122b9 100644
--- a/layout-inspector/BUILD
+++ b/layout-inspector/BUILD
@@ -26,10 +26,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
@@ -100,12 +100,12 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:jetbrains.kotlinx.coroutines.test[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api[test]",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common[test]",
@@ -167,10 +167,10 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
-        "@intellij//:JUnit",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:JUnit",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/testutils:studio.android.sdktools.testutils",
         "//tools/base/common:studio.android.sdktools.common[test]",
     ],
@@ -234,7 +234,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/app-inspection/inspector/api:app-inspection.inspector.api",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
diff --git a/layout-ui/BUILD b/layout-ui/BUILD
index 4a3250397e1..795f8311a5a 100644
--- a/layout-ui/BUILD
+++ b/layout-ui/BUILD
@@ -13,7 +13,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
diff --git a/layoutlib-loader/BUILD b/layoutlib-loader/BUILD
index e5e9e320adb..0f397a16538 100644
--- a/layoutlib-loader/BUILD
+++ b/layoutlib-loader/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api",
         "//tools/base/environment-services:studio.intellij.android.environment-services",
diff --git a/layoutlib/BUILD b/layoutlib/BUILD
index 9a05a27d279..7fb4b094fa1 100644
--- a/layoutlib/BUILD
+++ b/layoutlib/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:asm-tools",
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api",
         "//tools/adt/idea/layoutlib-loader:intellij.android.layoutlib-loader",
@@ -30,7 +30,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/layoutlib:intellij.android.layoutlib[test]",
diff --git a/lint/BUILD b/lint/BUILD
index eef10e8b697..aefd4c7b445 100644
--- a/lint/BUILD
+++ b/lint/BUILD
@@ -10,12 +10,12 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.plugins.gradle",
-        "@intellij//:com.intellij.properties",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
         "//tools/base/lint:studio.android.sdktools.lint-checks",
         "//tools/adt/idea/gradle-declarative-lang:intellij.android.gradle.declarative.lang",
     ],
@@ -38,8 +38,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
@@ -50,7 +50,7 @@ iml_module(
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
     ],
 )
diff --git a/logcat/BUILD b/logcat/BUILD
index b7954792664..6dc67c7f5dd 100644
--- a/logcat/BUILD
+++ b/logcat/BUILD
@@ -17,7 +17,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/base/adblib:studio.android.sdktools.adblib",
@@ -34,7 +34,7 @@ iml_module(
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/logcat:logcat-proto",
         "//prebuilts/r8",
-        "@intellij//:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
     ],
 )
 
@@ -58,8 +58,8 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.modules.json[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/analytics-library/tracker:analytics-tracker[test]",
         "//tools/analytics-library/testing:android.sdktools.analytics-testing[test]",
diff --git a/memory-usage/BUILD b/memory-usage/BUILD
index dd909682831..37faf6f5cb8 100644
--- a/memory-usage/BUILD
+++ b/memory-usage/BUILD
@@ -14,7 +14,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
     ],
 )
diff --git a/ml-api/BUILD.bazel b/ml-api/BUILD.bazel
index 15ceda8986c..2f808449c97 100644
--- a/ml-api/BUILD.bazel
+++ b/ml-api/BUILD.bazel
@@ -22,9 +22,9 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
-        "@intellij//:com.intellij.java[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
-        "@intellij//:com.intellij.platform.images[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
     ],
 )
diff --git a/mlkit/BUILD b/mlkit/BUILD
index 941ce28b43f..547fccc735a 100644
--- a/mlkit/BUILD
+++ b/mlkit/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/base/mlkit-common:studio.android.sdktools.mlkit-common",
         "//tools/analytics-library/tracker:analytics-tracker",
@@ -63,8 +63,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/mlkit:intellij.android.mlkit[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/motion-editor/BUILD b/motion-editor/BUILD
index b6e56267921..9507f9662c8 100644
--- a/motion-editor/BUILD
+++ b/motion-editor/BUILD
@@ -26,7 +26,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
diff --git a/native-symbolizer/BUILD b/native-symbolizer/BUILD
index 18ce634d325..17233374cd9 100644
--- a/native-symbolizer/BUILD
+++ b/native-symbolizer/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -31,7 +31,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/native-symbolizer",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
diff --git a/native-symbolizer/gradle/BUILD b/native-symbolizer/gradle/BUILD
index b98ddafbe58..9d665cf8b7e 100644
--- a/native-symbolizer/gradle/BUILD
+++ b/native-symbolizer/gradle/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
diff --git a/nav/editor/BUILD b/nav/editor/BUILD
index a07b500ef6c..b1f26f422e2 100644
--- a/nav/editor/BUILD
+++ b/nav/editor/BUILD
@@ -12,8 +12,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/designer:intellij.android.designer",
         "//tools/adt/idea/android:intellij.android.core",
@@ -58,11 +58,11 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/analytics-library/shared:analytics-shared[test]",
@@ -111,8 +111,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/nav/editor:intellij.android.nav.editor",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
diff --git a/nav/safeargs/common/BUILD b/nav/safeargs/common/BUILD
index da325c6432d..b6522bb2494 100644
--- a/nav/safeargs/common/BUILD
+++ b/nav/safeargs/common/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/analytics",
         "//tools/analytics-library/tracker:analytics-tracker",
diff --git a/nav/safeargs/common/gradle/BUILD b/nav/safeargs/common/gradle/BUILD
index 59edcb6088a..2c612126614 100644
--- a/nav/safeargs/common/gradle/BUILD
+++ b/nav/safeargs/common/gradle/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/nav/safeargs/common:intellij.android.nav.safeargs.common",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
diff --git a/nav/safeargs/k1/BUILD b/nav/safeargs/k1/BUILD
index 8bf4352d76d..dbcff5902ec 100644
--- a/nav/safeargs/k1/BUILD
+++ b/nav/safeargs/k1/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/nav/safeargs/common:intellij.android.nav.safeargs.common",
         "//tools/adt/idea/analytics",
diff --git a/nav/safeargs/k2/BUILD b/nav/safeargs/k2/BUILD
index 15ea9279ff1..cb48424e639 100644
--- a/nav/safeargs/k2/BUILD
+++ b/nav/safeargs/k2/BUILD
@@ -9,8 +9,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/adt/idea/nav/safeargs/common:intellij.android.nav.safeargs.common",
diff --git a/nav/safeargs/tests/common/BUILD b/nav/safeargs/tests/common/BUILD
index b3273a45ade..4ae8ed68551 100644
--- a/nav/safeargs/tests/common/BUILD
+++ b/nav/safeargs/tests/common/BUILD
@@ -36,9 +36,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/nav/safeargs:intellij.android.nav.safeargs[test]",
         "//tools/adt/idea/nav/safeargs/common:intellij.android.nav.safeargs.common[test]",
diff --git a/nav/safeargs/tests/k1/BUILD b/nav/safeargs/tests/k1/BUILD
index c5c8458e5d0..dff5f6a44c7 100644
--- a/nav/safeargs/tests/k1/BUILD
+++ b/nav/safeargs/tests/k1/BUILD
@@ -37,9 +37,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/nav/safeargs:intellij.android.nav.safeargs[test]",
         "//tools/adt/idea/nav/safeargs/common:intellij.android.nav.safeargs.common[test]",
diff --git a/nav/safeargs/tests/k2/BUILD b/nav/safeargs/tests/k2/BUILD
index 1229d0081f2..59a834a5650 100644
--- a/nav/safeargs/tests/k2/BUILD
+++ b/nav/safeargs/tests/k2/BUILD
@@ -19,8 +19,8 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/nav/safeargs:intellij.android.nav.safeargs[test]",
         "//tools/adt/idea/nav/safeargs/common:intellij.android.nav.safeargs.common[test]",
         "//tools/adt/idea/nav/safeargs/k2:intellij.android.nav.safeargs.k2[test]",
diff --git a/observable-demo/BUILD b/observable-demo/BUILD
index 9345669ce5a..288a6bac67e 100644
--- a/observable-demo/BUILD
+++ b/observable-demo/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/observable:intellij.android.observable",
         "//tools/adt/idea/observable-ui:intellij.android.observable.ui",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
diff --git a/observable-ui/BUILD b/observable-ui/BUILD
index 1b2180423c8..b313d989ddd 100644
--- a/observable-ui/BUILD
+++ b/observable-ui/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/adt/idea/observable:intellij.android.observable",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/observable/BUILD b/observable/BUILD
index d1c355a3863..229a5758276 100644
--- a/observable/BUILD
+++ b/observable/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/base/common:studio.android.sdktools.common",
diff --git a/old-agp-tests/BUILD b/old-agp-tests/BUILD
index b0d2fcd2a00..0ad384ca009 100644
--- a/old-agp-tests/BUILD
+++ b/old-agp-tests/BUILD
@@ -104,8 +104,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
@@ -123,7 +123,7 @@ iml_module(
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
         "//tools/adt/idea/project-system-gradle-repository-search:intellij.android.projectSystem.gradle.repositorySearch[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle.tests[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/execution/common:intellij.android.execution.common[test]",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/adt/idea/backup:intellij.android.backup.api[test]",
diff --git a/platform-performance-testing/BUILD b/platform-performance-testing/BUILD
index cca855e4b2f..6cf419c5b80 100644
--- a/platform-performance-testing/BUILD
+++ b/platform-performance-testing/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/perf-logger:studio.perf-logger",
         "//tools/adt/idea/as-driver:as-driver.utils",
     ],
diff --git a/preview-designer/BUILD b/preview-designer/BUILD
index 04c9b4a7cd9..38cde51a48f 100644
--- a/preview-designer/BUILD
+++ b/preview-designer/BUILD
@@ -15,9 +15,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/adt/idea/artwork:intellij.android.artwork",
@@ -60,7 +60,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -80,7 +80,7 @@ iml_module(
         "//tools/adt/idea/rendering:intellij.android.rendering[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
         "//tools/adt/idea/rendering:intellij.android.rendering.tests[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
         "//tools/adt/idea/preview-fast-compile:intellij.android.preview-fast-compile[test]",
diff --git a/preview-elements/BUILD b/preview-elements/BUILD
index 0c405371fef..2f4897fb700 100644
--- a/preview-elements/BUILD
+++ b/preview-elements/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
         "//tools/adt/idea/rendering:intellij.android.rendering",
         "//tools/base/common:studio.android.sdktools.common",
@@ -30,7 +30,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/preview-elements:intellij.android.preview-elements[test]",
diff --git a/profilers-android/BUILD b/profilers-android/BUILD
index 3af1d102642..93949bbbad1 100644
--- a/profilers-android/BUILD
+++ b/profilers-android/BUILD
@@ -27,7 +27,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/profilers-ui:intellij.android.profilers.ui",
diff --git a/profilers-android/gradle/BUILD b/profilers-android/gradle/BUILD
index 6635b311fe2..63464249712 100644
--- a/profilers-android/gradle/BUILD
+++ b/profilers-android/gradle/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/profilers-android:intellij.android.profilersAndroid",
diff --git a/profilers-atrace/BUILD b/profilers-atrace/BUILD
index 7e035c64fef..947bd544287 100644
--- a/profilers-atrace/BUILD
+++ b/profilers-atrace/BUILD
@@ -14,7 +14,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
diff --git a/profilers-integration/BUILD b/profilers-integration/BUILD
index bb50cac73e9..8064bd31b04 100644
--- a/profilers-integration/BUILD
+++ b/profilers-integration/BUILD
@@ -13,7 +13,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/profilers-ui/BUILD b/profilers-ui/BUILD
index a1c7fabc1fa..a6795e1810c 100644
--- a/profilers-ui/BUILD
+++ b/profilers-ui/BUILD
@@ -16,7 +16,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/profilers:intellij.android.profilers",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/adt/idea/adt-ui-compose:intellij.android.adt.ui.compose",
diff --git a/profilers/BUILD b/profilers/BUILD
index 7fcd7b7d5f0..a7bfd2ac078 100644
--- a/profilers/BUILD
+++ b/profilers/BUILD
@@ -29,7 +29,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/adt-ui-model:intellij.android.adt.ui.model",
diff --git a/project-system-apk/BUILD b/project-system-apk/BUILD
index a15fad6acbe..1413636f16f 100644
--- a/project-system-apk/BUILD
+++ b/project-system-apk/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/android-common:intellij.android.common",
diff --git a/project-system-gradle-models/BUILD b/project-system-gradle-models/BUILD
index 76b4d0677b0..b61a0c7d6d1 100644
--- a/project-system-gradle-models/BUILD
+++ b/project-system-gradle-models/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/sdk-common/gradle:studio.android.sdktools.sdk-common.gradle",
     ],
 )
@@ -26,7 +26,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework",
     ],
 )
diff --git a/project-system-gradle-psd/BUILD b/project-system-gradle-psd/BUILD
index 62129c4820c..41c426dbdde 100644
--- a/project-system-gradle-psd/BUILD
+++ b/project-system-gradle-psd/BUILD
@@ -12,8 +12,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/.idea/libraries:studio-proto",
@@ -31,7 +31,7 @@ iml_module(
         "//tools/adt/idea/project-system-gradle-repository-search:intellij.android.projectSystem.gradle.repositorySearch",
         "//tools/adt/idea/project-system-gradle-sync:intellij.android.projectSystem.gradle.sync",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android-npw:intellij.android.newProjectWizard",
         "//tools/adt/idea/project-system-gradle-upgrade:intellij.android.projectSystem.gradle.upgrade",
         "//tools/base/lint:studio.android.sdktools.lint-api",
@@ -100,8 +100,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
@@ -120,8 +120,8 @@ iml_module(
         "//tools/adt/idea/project-system-gradle-sync:intellij.android.projectSystem.gradle.sync[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
-        "@intellij//:org.intellij.groovy[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy[test]",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/project-system-gradle-psd:liblint-checks-proto.lib[test]",
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
diff --git a/project-system-gradle-repository-search/BUILD b/project-system-gradle-repository-search/BUILD
index e13fe5e3898..5ff1da83f31 100644
--- a/project-system-gradle-repository-search/BUILD
+++ b/project-system-gradle-repository-search/BUILD
@@ -12,7 +12,7 @@ iml_module(
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/adt/idea/android:intellij.android.core",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/gmaven:intellij.android.gmaven",
     ],
@@ -29,8 +29,8 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/project-system-gradle-repository-search:intellij.android.projectSystem.gradle.repositorySearch[test]",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common[test]",
     ],
 )
diff --git a/project-system-gradle-sync-test-utils/BUILD b/project-system-gradle-sync-test-utils/BUILD
index 634163e9918..d54e8126ea8 100644
--- a/project-system-gradle-sync-test-utils/BUILD
+++ b/project-system-gradle-sync-test-utils/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
     ],
 )
diff --git a/project-system-gradle-sync/BUILD b/project-system-gradle-sync/BUILD
index fc9ab99f778..bb697fd1dd1 100644
--- a/project-system-gradle-sync/BUILD
+++ b/project-system-gradle-sync/BUILD
@@ -12,10 +12,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:JUnit",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:JUnit",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/gradle-tooling/studio-gradle-tooling-api:intellij.android.gradle-tooling.api",
         "//tools/adt/idea/gradle-tooling/studio-gradle-tooling-impl:intellij.android.gradle-tooling.impl",
         "//tools/base/build-system/builder-model:studio.android.sdktools.builder-model",
@@ -48,8 +48,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/project-system-gradle-sync:intellij.android.projectSystem.gradle.sync[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
@@ -62,8 +62,8 @@ iml_module(
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models[test]",
         "//tools/adt/idea/project-system-gradle-upgrade:intellij.android.projectSystem.gradle.upgrade[test]",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:JUnit",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:JUnit",
     ],
 )
 
diff --git a/project-system-gradle-upgrade/BUILD b/project-system-gradle-upgrade/BUILD
index ec6ff556f32..651c7614f4e 100644
--- a/project-system-gradle-upgrade/BUILD
+++ b/project-system-gradle-upgrade/BUILD
@@ -42,7 +42,7 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
         "//tools/adt/idea/project-system-gradle-upgrade:intellij.android.projectSystem.gradle.upgrade",
@@ -52,7 +52,7 @@ iml_module(
         "//tools/adt/idea/observable:intellij.android.observable[test]",
         "//tools/adt/idea/adt-ui-model:intellij.android.adt.ui.model[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl.testutils",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
@@ -87,9 +87,9 @@ iml_module(
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
         "//tools/adt/idea/project-system-gradle-models:intellij.android.projectSystem.gradle.models",
@@ -98,10 +98,10 @@ iml_module(
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl",
         "//tools/analytics-library/tracker:analytics-tracker",
-        "@intellij//:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
         "//tools/adt/idea/analytics",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:intellij.platform.lvcs.impl",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.lvcs.impl",
         "//tools/adt/idea/gmaven:intellij.android.gmaven",
     ],
 )
diff --git a/project-system-gradle/BUILD b/project-system-gradle/BUILD
index 06e91f6431e..719884868bf 100644
--- a/project-system-gradle/BUILD
+++ b/project-system-gradle/BUILD
@@ -56,10 +56,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.plugins.gradle",
-        "@intellij//:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
         "//tools/adt/idea/utp",
         "//tools/analytics-library/shared:analytics-shared",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
@@ -85,16 +85,16 @@ iml_module(
         "//tools/adt/idea/apkanalyzer:intellij.android.apkanalyzer",
         "//tools/adt/idea/lint:intellij.lint",
         "//tools/adt/idea/.idea/libraries:studio-proto",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:JUnit",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:JUnit",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/base/tracer:studio.android.sdktools.tracer",
         "//tools/base/kotlin-multiplatform-models:studio.android.kotlin-multiplatform-models",
         "//tools/adt/idea/.idea/libraries:kotlin-multiplatform-android-models-proto",
         "//tools/adt/idea/.idea/libraries:utp-core-proto-jarjar",
-        "@intellij//:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
         "//tools/base/lint:studio.android.sdktools.lint-checks",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
         "//tools/adt/idea/gradle-tooling/studio-gradle-tooling-impl:intellij.android.gradle-tooling.impl",
         "//tools/adt/idea/execution/common:intellij.android.execution.common",
         "//tools/adt/idea/ml-api:intellij.android.ml-api",
@@ -445,14 +445,14 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.plugins.gradle",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:com.intellij.java-i18n",
-        "@intellij//:com.intellij.java.ide",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java-i18n",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java.ide",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/jps-model:intellij.android.jps.model[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
@@ -480,15 +480,15 @@ iml_module(
         "//tools/analytics-library/testing:android.sdktools.analytics-testing[test]",
         "//tools/analytics-library/tracker:analytics-tracker[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
-        "@intellij//:org.intellij.groovy[test]",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy[test]",
         "//tools/base/build-system:studio.android.sdktools.manifest-merger[test]",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/analytics-library/shared:analytics-shared[test]",
         "//tools/adt/idea/build-attribution:intellij.android.build-attribution[test]",
         "//tools/adt/idea/execution/common:intellij.android.execution.common[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
-        "@intellij//:org.toml.lang",
-        "@intellij//:com.intellij.properties[test]",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties[test]",
         "//tools/adt/idea/.idea/libraries:agp-version[test]",
         "//tools/adt/idea/gradle-dsl:intellij.android.gradle.dsl.testutils[test]",
         "//tools/adt/idea/gradle-dsl-declarative:intellij.android.gradle.dsl.declarative[test]",
diff --git a/project-system-integration-tests/BUILD b/project-system-integration-tests/BUILD
index 74df071e96f..37b44ed49c0 100644
--- a/project-system-integration-tests/BUILD
+++ b/project-system-integration-tests/BUILD
@@ -30,7 +30,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//prebuilts/tools/common/m2:junit-4.12[test]",
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/project-system/BUILD b/project-system/BUILD
index 5c2f0dd568c..208610a268d 100644
--- a/project-system/BUILD
+++ b/project-system/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/base/build-system:studio.android.sdktools.manifest-merger",
@@ -34,8 +34,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/.idea/libraries:truth",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:mockito",
diff --git a/render-resources/BUILD b/render-resources/BUILD
index d2da4acc0c4..d8c0fec647f 100644
--- a/render-resources/BUILD
+++ b/render-resources/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/sdklib:studio.android.sdktools.sdklib",
         "//tools/adt/idea/layoutlib-loader:intellij.android.layoutlib-loader",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository",
@@ -71,7 +71,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/base/resource-repository:studio.android.sdktools.resource-repository[test]",
         "//tools/adt/idea/render-resources:intellij.android.render-resources[test]",
diff --git a/rendering/BUILD b/rendering/BUILD
index 73a22260e4d..19ffc8200a4 100644
--- a/rendering/BUILD
+++ b/rendering/BUILD
@@ -13,7 +13,7 @@ iml_module(
     deps = [
         "//tools/base/layoutlib-api:studio.android.sdktools.layoutlib-api",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/adt/idea/render-resources:intellij.android.render-resources",
@@ -37,7 +37,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/adt/idea/rendering:intellij.android.rendering[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/room/BUILD b/room/BUILD
index 7b238385dca..e9230adb462 100644
--- a/room/BUILD
+++ b/room/BUILD
@@ -9,8 +9,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/android-lang:intellij.android.lang",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
     ],
@@ -34,9 +34,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/room:intellij.android.room",
         "//tools/adt/idea/.idea/libraries:truth",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework",
diff --git a/rt/BUILD b/rt/BUILD
index cc5e397c2a9..2443184eaf4 100644
--- a/rt/BUILD
+++ b/rt/BUILD
@@ -10,6 +10,6 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
diff --git a/safemode/BUILD b/safemode/BUILD
index 0b47b630710..4e2b43150f4 100644
--- a/safemode/BUILD
+++ b/safemode/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/artwork:intellij.android.artwork",
     ],
@@ -64,7 +64,7 @@ iml_module(
         "//tools/adt/idea/as-driver:as-driver.utils[test]",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
 )
diff --git a/samples-browser/BUILD b/samples-browser/BUILD
index d43b95a121d..2e2d3598c76 100644
--- a/samples-browser/BUILD
+++ b/samples-browser/BUILD
@@ -17,7 +17,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/adt/idea/wizard-model:intellij.android.wizard.model",
         "//tools/adt/idea/wizard:intellij.android.wizard",
diff --git a/screenshot-testing/BUILD b/screenshot-testing/BUILD
index da93b116af5..a975f482ae6 100644
--- a/screenshot-testing/BUILD
+++ b/screenshot-testing/BUILD
@@ -11,12 +11,12 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/adt/idea/adt-ui-compose:intellij.android.adt.ui.compose",
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/android-common:intellij.android.common",
     ],
@@ -44,14 +44,14 @@ iml_module(
     deps = [
         "@intellij//:intellij-sdk",
         "//tools/adt/idea/adt-ui-compose:intellij.android.adt.ui.compose[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
-        "@intellij//:JUnit[test]",
+        "//prebuilts/studio/intellij-sdk:JUnit[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/screenshot-testing:intellij.android.screenshot-test",
diff --git a/screenshot-testing/gradle/BUILD b/screenshot-testing/gradle/BUILD
index 73a42e379f6..85b81af373f 100644
--- a/screenshot-testing/gradle/BUILD
+++ b/screenshot-testing/gradle/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/adt/idea/screenshot-testing:intellij.android.screenshot-test",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle",
diff --git a/sdk-updates/BUILD b/sdk-updates/BUILD
index 0cd56ac5708..38b745736c8 100644
--- a/sdk-updates/BUILD
+++ b/sdk-updates/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/android-common:intellij.android.common",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/analytics-library/tracker:analytics-tracker",
@@ -41,10 +41,10 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/sdk-updates:intellij.android.sdkUpdates[test]",
         "//tools/base/repository:studio.android.sdktools.repository[test]",
         "//tools/base/sdklib:studio.android.sdktools.sdklib[test]",
diff --git a/server-flags/BUILD b/server-flags/BUILD
index 4f2a91a94a1..e4d4c5800ef 100644
--- a/server-flags/BUILD
+++ b/server-flags/BUILD
@@ -19,7 +19,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
diff --git a/smali/BUILD b/smali/BUILD
index 06a121f777f..da8cf3576bf 100644
--- a/smali/BUILD
+++ b/smali/BUILD
@@ -18,7 +18,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/streaming/BUILD b/streaming/BUILD
index d548f626229..9a682fcbeb9 100644
--- a/streaming/BUILD
+++ b/streaming/BUILD
@@ -12,8 +12,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/analytics",
         "//tools/analytics-library/crash:analytics-crash",
         "//tools/analytics-library/shared:analytics-shared",
@@ -102,11 +102,11 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:mockito-kotlin[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
         "//tools/adt/idea/.idea/libraries:studio-grpc[test]",
-        "@intellij//:com.intellij.platform.images[test]",
-        "@intellij//:intellij.webp[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.webp[test]",
         "//tools/adt/idea/.idea/libraries:studio-proto[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
     ],
@@ -144,7 +144,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
 )
@@ -253,7 +253,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:studio-grpc[test]",
         "//tools/adt/idea/.idea/libraries:studio-proto[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/artwork:intellij.android.artwork[test]",
         "//tools/adt/idea/project-system:intellij.android.projectSystem[test]",
diff --git a/studio-updater/BUILD b/studio-updater/BUILD
index 6c43ab9b7b3..02ccfb766e5 100644
--- a/studio-updater/BUILD
+++ b/studio-updater/BUILD
@@ -13,7 +13,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "@intellij//:updater",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/analytics-library/shared:analytics-shared",
diff --git a/studio/BUILD b/studio/BUILD
index 02d2a3920e6..d16643f72f7 100644
--- a/studio/BUILD
+++ b/studio/BUILD
@@ -416,24 +416,24 @@ studio_plugin(
     deps = [
         ":com.android.tools.gradle.dcl",
         ":com.android.tools.idea.smali",
-        "@intellij//:JUnit",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.modules.json",
-        "@intellij//:com.intellij.platform.images",
-        "@intellij//:com.intellij.properties",
-        "@intellij//:intellij.libraries.grpc",
-        "@intellij//:intellij.libraries.grpc.netty.shaded",
-        "@intellij//:intellij.platform.lvcs.impl",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:intellij.platform.vcs.log.impl",
-        "@intellij//:intellij.webp",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.intellij.intelliLang",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.jetbrains.plugins.gradle",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:JUnit",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc.netty.shaded",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.lvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.log.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.webp",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.intellij.intelliLang",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
     ],
 )
 
@@ -446,7 +446,7 @@ studio_plugin(
         ":com.android.tools.idea.smali",
         ":com.android.tools.ndk",
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
@@ -467,9 +467,9 @@ studio_plugin(
         "@intellij//:com.intellij.cidr.debugger",
         "@intellij//:com.intellij.cidr.lang",
         "@intellij//:com.intellij.cidr.lang.clangd",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -507,9 +507,9 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.platform.images",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -520,9 +520,9 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.modules.json",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -533,8 +533,8 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:Git4Idea",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:Git4Idea",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
@@ -555,11 +555,11 @@ studio_plugin(
     deps = [
         ":com.google.gct.test.recorder",
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:intellij.libraries.grpc",
-        "@intellij//:intellij.libraries.grpc.netty.shaded",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc.netty.shaded",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -578,9 +578,9 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -605,14 +605,14 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:Git4Idea",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:com.intellij.java",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:Git4Idea",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
     ],
 )
 
@@ -622,7 +622,7 @@ studio_plugin(
     modules = {"smali.jar": ["//tools/adt/idea/smali:intellij.android.smali"]},
     visibility = ["//visibility:public"],
     deps = [
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
@@ -645,8 +645,8 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -665,9 +665,9 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -683,9 +683,9 @@ studio_plugin(
     },
     visibility = ["//visibility:public"],
     deps = [
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -696,8 +696,8 @@ studio_plugin(
     visibility = ["//visibility:public"],
     deps = [
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -732,10 +732,10 @@ studio_plugin(
     deps = [
         ":com.android.tools.design",
         ":org.jetbrains.android",
-        "@intellij//:com.intellij.java",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:intellij.platform.vcs.log.impl",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.log.impl",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
     ],
 )
 
@@ -1032,7 +1032,7 @@ iml_module(
         "//tools/vendor/google/ml/aiplugin/experimental:aiplugin.experimental",
         "//tools/adt/idea/studio:studio-sdk-all-plugins",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
     ],
 )
 
@@ -1061,7 +1061,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/perf-logger:studio.perf-logger[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "//tools/adt/idea/.idea/libraries:studio-grpc",
@@ -1084,7 +1084,7 @@ iml_module(
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:truth[test]",
     ],
 )
@@ -1156,13 +1156,13 @@ iml_module(
     # do not sort: must match IML order
     runtime_deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:Coverage",
-        "@intellij//:DevKit",
-        "@intellij//:Git4Idea",
-        "@intellij//:HtmlTools",
-        "@intellij//:JUnit",
+        "//prebuilts/studio/intellij-sdk:Coverage",
+        "//prebuilts/studio/intellij-sdk:DevKit",
+        "//prebuilts/studio/intellij-sdk:Git4Idea",
+        "//prebuilts/studio/intellij-sdk:HtmlTools",
+        "//prebuilts/studio/intellij-sdk:JUnit",
         "@intellij//:Subversion",
-        "@intellij//:TestNG-J",
+        "//prebuilts/studio/intellij-sdk:TestNG-J",
         "@intellij//:com.intellij.cidr.base",
         "@intellij//:com.intellij.cidr.debugger",
         "@intellij//:com.intellij.cidr.lang",
@@ -1172,87 +1172,87 @@ iml_module(
         "@intellij//:com.intellij.configurationScript",
         "@intellij//:com.intellij.copyright",
         "@intellij//:com.intellij.dev",
-        "@intellij//:com.intellij.gradle",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.java-i18n",
-        "@intellij//:com.intellij.java.ide",
-        "@intellij//:com.intellij.modules.json",
-        "@intellij//:com.intellij.platform.images",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java-i18n",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java.ide",
+        "//prebuilts/studio/intellij-sdk:com.intellij.modules.json",
+        "//prebuilts/studio/intellij-sdk:com.intellij.platform.images",
         "@intellij//:com.intellij.plugins.eclipsekeymap",
         "@intellij//:com.intellij.plugins.netbeanskeymap",
         "@intellij//:com.intellij.plugins.visualstudiokeymap",
-        "@intellij//:com.intellij.properties",
+        "//prebuilts/studio/intellij-sdk:com.intellij.properties",
         "@intellij//:com.intellij.tasks",
         "@intellij//:com.intellij.turboComplete",
-        "@intellij//:com.jetbrains.performancePlugin",
+        "//prebuilts/studio/intellij-sdk:com.jetbrains.performancePlugin",
         "@intellij//:com.jetbrains.sh",
         "@intellij//:hg4idea",
-        "@intellij//:intellij.java.featuresTrainer",
-        "@intellij//:intellij.java.structuralSearch",
-        "@intellij//:intellij.java.unscramble",
-        "@intellij//:intellij.java.vcs",
-        "@intellij//:intellij.jvm.analysis.impl",
+        "//prebuilts/studio/intellij.java.featuresTrainer",
+        "//prebuilts/studio/intellij.java.structuralSearch",
+        "//prebuilts/studio/intellij-sdk:intellij.java.unscramble",
+        "//prebuilts/studio/intellij-sdk:intellij.java.vcs",
+        "//prebuilts/studio/intellij-sdk:intellij.jvm.analysis.impl",
         "@intellij//:intellij.libraries.compose.desktop",
-        "@intellij//:intellij.libraries.grpc",
-        "@intellij//:intellij.libraries.grpc.netty.shaded",
-        "@intellij//:intellij.libraries.ktor.client",
-        "@intellij//:intellij.libraries.ktor.client.cio",
-        "@intellij//:intellij.libraries.microba",
-        "@intellij//:intellij.libraries.skiko",
-        "@intellij//:intellij.markdown.compose.preview",
-        "@intellij//:intellij.platform.clouds",
-        "@intellij//:intellij.platform.collaborationTools",
-        "@intellij//:intellij.platform.compose",
-        "@intellij//:intellij.platform.coverage",
-        "@intellij//:intellij.platform.coverage.agent",
-        "@intellij//:intellij.platform.debugger.impl.backend",
-        "@intellij//:intellij.platform.debugger.impl.frontend",
-        "@intellij//:intellij.platform.diagnostic.freezeAnalyzer",
-        "@intellij//:intellij.platform.diagnostic.freezes",
-        "@intellij//:intellij.platform.execution.dashboard",
-        "@intellij//:intellij.platform.execution.serviceView",
-        "@intellij//:intellij.platform.frontend",
-        "@intellij//:intellij.platform.images.backend.svg",
-        "@intellij//:intellij.platform.images.copyright",
-        "@intellij//:intellij.platform.inline.completion",
-        "@intellij//:intellij.platform.kernel.backend",
-        "@intellij//:intellij.platform.lvcs.impl",
-        "@intellij//:intellij.platform.navbar",
-        "@intellij//:intellij.platform.navbar.backend",
-        "@intellij//:intellij.platform.navbar.frontend",
-        "@intellij//:intellij.platform.navbar.monolith",
-        "@intellij//:intellij.platform.progress.backend",
-        "@intellij//:intellij.platform.project.backend",
-        "@intellij//:intellij.platform.rpc.backend",
-        "@intellij//:intellij.platform.settings.local",
-        "@intellij//:intellij.platform.smRunner.vcs",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:intellij.platform.vcs.log.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc.netty.shaded",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.ktor.client",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.ktor.client.cio",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.microba",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.skiko",
+        "//prebuilts/studio/intellij-sdk:intellij.markdown.compose.preview",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.clouds",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.collaborationTools",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.compose",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage.agent",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.debugger.impl.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.debugger.impl.frontend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.diagnostic.freezeAnalyzer",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.diagnostic.freezes",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.execution.dashboard",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.execution.serviceView",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.frontend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.images.backend.svg",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.images.copyright",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.inline.completion",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.kernel.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.lvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar.frontend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar.monolith",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.progress.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.project.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.rpc.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.settings.local",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.smRunner.vcs",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.log.impl",
         "@intellij//:intellij.rml.dfa.impl",
-        "@intellij//:intellij.settingsSync.core",
-        "@intellij//:intellij.smart.update",
-        "@intellij//:intellij.turboComplete.languages.kotlin",
-        "@intellij//:intellij.webp",
-        "@intellij//:org.editorconfig.editorconfigjetbrains",
-        "@intellij//:org.intellij.groovy",
-        "@intellij//:org.intellij.intelliLang",
-        "@intellij//:org.intellij.plugins.markdown",
-        "@intellij//:org.jetbrains.debugger.streams",
-        "@intellij//:org.jetbrains.idea.maven.model",
-        "@intellij//:org.jetbrains.idea.maven.server.api",
-        "@intellij//:org.jetbrains.idea.reposearch",
-        "@intellij//:org.jetbrains.java.decompiler",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:intellij.settingsSync.core",
+        "//prebuilts/studio/intellij-sdk:intellij.smart.update",
+        "//prebuilts/studio/intellij-sdk:intellij.turboComplete.languages.kotlin",
+        "//prebuilts/studio/intellij-sdk:intellij.webp",
+        "//prebuilts/studio/intellij-sdk:org.editorconfig.editorconfigjetbrains",
+        "//prebuilts/studio/intellij-sdk:org.intellij.groovy",
+        "//prebuilts/studio/intellij-sdk:org.intellij.intelliLang",
+        "//prebuilts/studio/intellij-sdk:org.intellij.plugins.markdown",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.debugger.streams",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.idea.maven.model",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.idea.maven.server.api",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.idea.reposearch",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.java.decompiler",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "@intellij//:org.jetbrains.plugins.clangConfig",
         "@intellij//:org.jetbrains.plugins.clangFormat",
-        "@intellij//:org.jetbrains.plugins.github",
-        "@intellij//:org.jetbrains.plugins.gitlab",
-        "@intellij//:org.jetbrains.plugins.gradle",
-        "@intellij//:org.jetbrains.plugins.terminal",
-        "@intellij//:org.jetbrains.plugins.textmate",
-        "@intellij//:org.jetbrains.plugins.yaml",
-        "@intellij//:org.toml.lang",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.github",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gitlab",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.terminal",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.textmate",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.yaml",
+        "//prebuilts/studio/intellij-sdk:org.toml.lang",
     ],
 )
 
@@ -1263,46 +1263,46 @@ iml_module(
     visibility = ["//visibility:public"],
     # do not sort: must match IML order
     runtime_deps = [
-        "@intellij//:intellij.java.featuresTrainer",
-        "@intellij//:intellij.java.structuralSearch",
-        "@intellij//:intellij.java.unscramble",
-        "@intellij//:intellij.java.vcs",
-        "@intellij//:intellij.jvm.analysis.impl",
-        "@intellij//:intellij.libraries.grpc",
-        "@intellij//:intellij.libraries.grpc.netty.shaded",
-        "@intellij//:intellij.libraries.ktor.client",
-        "@intellij//:intellij.libraries.ktor.client.cio",
-        "@intellij//:intellij.libraries.microba",
-        "@intellij//:intellij.platform.clouds",
-        "@intellij//:intellij.platform.collaborationTools",
-        "@intellij//:intellij.platform.coverage",
-        "@intellij//:intellij.platform.coverage.agent",
-        "@intellij//:intellij.platform.debugger.impl.backend",
-        "@intellij//:intellij.platform.debugger.impl.frontend",
-        "@intellij//:intellij.platform.diagnostic.freezeAnalyzer",
-        "@intellij//:intellij.platform.diagnostic.freezes",
-        "@intellij//:intellij.platform.execution.dashboard",
-        "@intellij//:intellij.platform.execution.serviceView",
-        "@intellij//:intellij.platform.frontend",
-        "@intellij//:intellij.platform.images.backend.svg",
-        "@intellij//:intellij.platform.images.copyright",
-        "@intellij//:intellij.platform.kernel.backend",
-        "@intellij//:intellij.platform.lvcs.impl",
-        "@intellij//:intellij.platform.navbar",
-        "@intellij//:intellij.platform.navbar.backend",
-        "@intellij//:intellij.platform.navbar.frontend",
-        "@intellij//:intellij.platform.navbar.monolith",
-        "@intellij//:intellij.platform.progress.backend",
-        "@intellij//:intellij.platform.project.backend",
-        "@intellij//:intellij.platform.rpc.backend",
-        "@intellij//:intellij.platform.settings.local",
-        "@intellij//:intellij.platform.smRunner.vcs",
-        "@intellij//:intellij.platform.vcs.dvcs.impl",
-        "@intellij//:intellij.platform.vcs.impl",
-        "@intellij//:intellij.platform.vcs.log.impl",
-        "@intellij//:intellij.settingsSync.core",
-        "@intellij//:intellij.smart.update",
-        "@intellij//:intellij.turboComplete.languages.kotlin",
-        "@intellij//:intellij.platform.inline.completion",
+        "//prebuilts/studio/intellij.java.featuresTrainer",
+        "//prebuilts/studio/intellij.java.structuralSearch",
+        "//prebuilts/studio/intellij-sdk:intellij.java.unscramble",
+        "//prebuilts/studio/intellij-sdk:intellij.java.vcs",
+        "//prebuilts/studio/intellij-sdk:intellij.jvm.analysis.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.grpc.netty.shaded",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.ktor.client",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.ktor.client.cio",
+        "//prebuilts/studio/intellij-sdk:intellij.libraries.microba",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.clouds",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.collaborationTools",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage.agent",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.debugger.impl.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.debugger.impl.frontend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.diagnostic.freezeAnalyzer",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.diagnostic.freezes",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.execution.dashboard",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.execution.serviceView",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.frontend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.images.backend.svg",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.images.copyright",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.kernel.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.lvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar.frontend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.navbar.monolith",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.progress.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.project.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.rpc.backend",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.settings.local",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.smRunner.vcs",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.dvcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.vcs.log.impl",
+        "//prebuilts/studio/intellij-sdk:intellij.settingsSync.core",
+        "//prebuilts/studio/intellij-sdk:intellij.smart.update",
+        "//prebuilts/studio/intellij-sdk:intellij.turboComplete.languages.kotlin",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.inline.completion",
     ],
 )
diff --git a/swingp/BUILD b/swingp/BUILD
index fc47dfcb0d4..3f49d6cf82c 100644
--- a/swingp/BUILD
+++ b/swingp/BUILD
@@ -18,7 +18,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/sync-memory-tests/BUILD b/sync-memory-tests/BUILD
index 2e6237c83fa..f5771dcf2ee 100644
--- a/sync-memory-tests/BUILD
+++ b/sync-memory-tests/BUILD
@@ -229,8 +229,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
diff --git a/sync-perf-tests/BUILD b/sync-perf-tests/BUILD
index 50831bdadd4..c7eb505a82e 100644
--- a/sync-perf-tests/BUILD
+++ b/sync-perf-tests/BUILD
@@ -61,8 +61,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
diff --git a/testartifacts/BUILD b/testartifacts/BUILD
index 2da7348ed9d..48fd1c290b9 100644
--- a/testartifacts/BUILD
+++ b/testartifacts/BUILD
@@ -10,8 +10,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/adt/idea/project-system:intellij.android.projectSystem",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/analytics-library/tracker:analytics-tracker",
@@ -56,7 +56,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/adt/idea/adt-ui:intellij.android.adt.ui[test]",
@@ -68,12 +68,12 @@ iml_module(
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/flags:studio.android.sdktools.flags[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/lint:studio.android.sdktools.lint-checks[test]",
         "//tools/adt/idea/android:intellij.android.core.tests[test]",
-        "@intellij//:Coverage[test]",
+        "//prebuilts/studio/intellij-sdk:Coverage[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
-        "@intellij//:org.jetbrains.plugins.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.plugins.gradle[test]",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto[test]",
         "//tools/adt/idea/execution/common:intellij.android.execution.common[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
@@ -93,7 +93,7 @@ iml_module(
         "//tools/analytics-library/shared:analytics-shared[test]",
         "//tools/adt/idea/execution/common:intellij.android.execution.common.tests[test]",
         "//tools/adt/idea/android-adb:intellij.android.adb[test]",
-        "@intellij//:intellij.platform.coverage[test]",
+        "//prebuilts/studio/intellij-sdk:intellij.platform.coverage[test]",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/adt/idea/testartifacts:intellij.android.testartifacts[test]",
     ],
diff --git a/threading-checker/BUILD b/threading-checker/BUILD
index 66c3e23ea8f..5d4da9dfa10 100644
--- a/threading-checker/BUILD
+++ b/threading-checker/BUILD
@@ -9,7 +9,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/threading-agent-callback:studio.android.sdktools.threading-agent-callback",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/analytics-library/tracker:analytics-tracker",
@@ -28,7 +28,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
diff --git a/transport-database/BUILD b/transport-database/BUILD
index 5f9d0da5884..59a82caf1f6 100644
--- a/transport-database/BUILD
+++ b/transport-database/BUILD
@@ -12,7 +12,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/base/common:studio.android.sdktools.common",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/uitest-framework/BUILD b/uitest-framework/BUILD
index 90420bca12a..6c9519a92ae 100644
--- a/uitest-framework/BUILD
+++ b/uitest-framework/BUILD
@@ -18,8 +18,8 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle[test]",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle[test]",
         "//tools/base/common:studio.android.sdktools.common[test]",
         "//tools/adt/idea/android:intellij.android.core[test]",
         "//tools/swing-testing/fest-swing[test]",
@@ -50,7 +50,7 @@ iml_module(
         "//tools/adt/idea/android-plugin:intellij.android.plugin[test]",
         "//tools/adt/idea/streaming:intellij.android.streaming[test]",
         "//tools/adt/idea/app-inspection/ide:app-inspection.ide[test]",
-        "@intellij//:org.jetbrains.kotlin[test]",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin[test]",
         "//tools/adt/idea/project-system-gradle:intellij.android.projectSystem.gradle[test]",
         "//tools/adt/idea/android-npw:intellij.android.newProjectWizard[test]",
         "//tools/adt/idea/wizard:intellij.android.wizard[test]",
diff --git a/utp/BUILD b/utp/BUILD
index a656bb5f85b..51c5cd7c5b6 100644
--- a/utp/BUILD
+++ b/utp/BUILD
@@ -12,9 +12,9 @@ iml_module(
     visibility = ["//visibility:public"],
     # do not sort: must match IML order
     deps = [
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/utp:libstudio.android-test-plugin-result-listener-gradle-proto",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/wear-designer/BUILD b/wear-designer/BUILD
index 48e202ab711..221613aa533 100644
--- a/wear-designer/BUILD
+++ b/wear-designer/BUILD
@@ -11,9 +11,9 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "//tools/adt/idea/preview-designer:intellij.android.preview-designer",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/designer:intellij.android.designer",
         "//tools/adt/idea/.idea/libraries:studio-analytics-proto",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -44,8 +44,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:org.jetbrains.kotlin",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "//tools/adt/idea/android-test-framework:intellij.android.testFramework[test]",
         "//tools/base/testutils:studio.android.sdktools.testutils[test]",
diff --git a/wear-pairing/BUILD b/wear-pairing/BUILD
index 5e508b5cc01..fc3c9541e0d 100644
--- a/wear-pairing/BUILD
+++ b/wear-pairing/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/wizard-model:intellij.android.wizard.model",
         "//tools/adt/idea/observable:intellij.android.observable",
         "//tools/base/ddmlib:studio.android.sdktools.ddmlib",
@@ -24,7 +24,7 @@ iml_module(
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/analytics-library/tracker:analytics-tracker",
         "//tools/adt/idea/wizard:intellij.android.wizard",
-        "@intellij//:org.jetbrains.kotlin",
+        "//prebuilts/studio/intellij-sdk:org.jetbrains.kotlin",
         "//tools/base/flags:studio.android.sdktools.flags",
     ],
 )
@@ -41,7 +41,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/wear-pairing:intellij.android.wear-pairing[test]",
         "//tools/adt/idea/observable:intellij.android.observable[test]",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
diff --git a/wear-preview-elements/BUILD b/wear-preview-elements/BUILD
index f72472de691..0e14751fd4e 100644
--- a/wear-preview-elements/BUILD
+++ b/wear-preview-elements/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/sdk-common:studio.android.sdktools.sdk-common",
         "//tools/adt/idea/preview-elements:intellij.android.preview-elements",
     ],
@@ -26,7 +26,7 @@ iml_module(
     deps = [
         "//tools/adt/idea/.idea/libraries:junit4[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:kotlin-test[test]",
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/wear-preview-elements:intellij.android.wear-preview-elements[test]",
diff --git a/wear-whs/BUILD b/wear-whs/BUILD
index b23f124658d..bcdee0a12bf 100644
--- a/wear-whs/BUILD
+++ b/wear-whs/BUILD
@@ -13,7 +13,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/flags:studio.android.sdktools.flags",
         "//tools/adt/idea/artwork:intellij.android.artwork",
         "//tools/adt/idea/android-common:intellij.android.common",
diff --git a/whats-new-assistant/BUILD b/whats-new-assistant/BUILD
index aee8399401f..d6d0c7492bc 100644
--- a/whats-new-assistant/BUILD
+++ b/whats-new-assistant/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/android-common:intellij.android.common",
@@ -40,8 +40,8 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
-        "@intellij//:com.intellij.gradle",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.gradle",
         "//tools/adt/idea/assistant",
         "//tools/adt/idea/android:intellij.android.core",
         "//tools/adt/idea/android-common:intellij.android.common",
diff --git a/wizard-model/BUILD b/wizard-model/BUILD
index eb60f6667b8..57d040acfa4 100644
--- a/wizard-model/BUILD
+++ b/wizard-model/BUILD
@@ -10,7 +10,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/base/annotations:studio.android.sdktools.android-annotations",
         "//tools/adt/idea/observable:intellij.android.observable",
         "//tools/adt/idea/.idea/libraries:junit4[test]",
diff --git a/wizard/BUILD b/wizard/BUILD
index 0bfc5288b44..7187c49b0ae 100644
--- a/wizard/BUILD
+++ b/wizard/BUILD
@@ -11,7 +11,7 @@ iml_module(
     # do not sort: must match IML order
     deps = [
         "@intellij//:intellij-sdk",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/wizard-model:intellij.android.wizard.model",
         "//tools/adt/idea/observable:intellij.android.observable",
         "//tools/adt/idea/observable-ui:intellij.android.observable.ui",
@@ -35,7 +35,7 @@ iml_module(
         "//tools/adt/idea/.idea/libraries:truth[test]",
         "//tools/adt/idea/wizard:intellij.android.wizard[test]",
         "@intellij//:intellij-sdk[test]",
-        "@intellij//:com.intellij.java",
+        "//prebuilts/studio/intellij-sdk:com.intellij.java",
         "//tools/adt/idea/.idea/libraries:mockito[test]",
         "//tools/adt/idea/android-common:intellij.android.common[test]",
         "//tools/adt/idea/adt-testutils:intellij.android.adt.testutils[test]",
-- 
2.34.1

